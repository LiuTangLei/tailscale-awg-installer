# Tailscale —Å Amnezia-WG 1.5

[![GitHub Release](https://img.shields.io/github/v/release/LiuTangLei/tailscale)](https://github.com/LiuTangLei/tailscale/releases/latest)
[![Platform Support](https://img.shields.io/badge/platform-Linux%20|%20macOS%20|%20Windows-blue)](https://github.com/LiuTangLei/tailscale/releases/latest)
[![License](https://img.shields.io/badge/license-BSD--3--Clause-green)](LICENSE)

Tailscale —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º **Amnezia-WG 1.5** –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ –∏ –æ–±—Ö–æ–¥–∞ DPI –∏ —Ü–µ–Ω–∑—É—Ä—ã.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

**Linux:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash
```

**macOS:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash
```

**Windows (PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):**

```powershell
iwr -useb https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1 | iex
```

### –í–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

**–ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ –∑–µ—Ä–∫–∞–ª–∞ (–µ—Å–ª–∏ GitHub –º–µ–¥–ª–µ–Ω–Ω—ã–π –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ):**

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—à–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–µ—Ä–∫–∞–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, <https://your-mirror-site.com>) —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –∑–µ—Ä–∫–∞–ª. –í—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–≤–æ—ë –∑–µ—Ä–∫–∞–ª–æ –∏—Å–ø–æ–ª—å–∑—É—è [gh-proxy](https://github.com/hunshcn/gh-proxy).

```bash
# Linux:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash -s -- --mirror https://your-mirror-site.com
```

```bash
# macOS:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash -s -- --mirror https://your-mirror-site.com
```

```powershell
# Windows:
$scriptContent = (iwr -useb https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1).Content;$scriptBlock = [scriptblock]::Create($scriptContent); & $scriptBlock -MirrorPrefix 'https://your-mirror-site.com/'
```

**–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è PowerShell:**

```powershell
# –ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:
Set-ExecutionPolicy RemoteSigned
# –∏–ª–∏
Set-ExecutionPolicy Bypass -Scope Process
```

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ
2. **–í–æ–π—Ç–∏** –≤ Tailscale:

```bash
# –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
tailscale up

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Headscale
tailscale up --login-server https://your-headscale-domain
```

3. **–í–∫–ª—é—á–∏—Ç—å –æ–±—Ñ—É—Å–∫–∞—Ü–∏—é** –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:

```bash
# –ë–∞–∑–æ–≤—ã–π –æ–±—Ö–æ–¥ DPI (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –ª—é–±—ã–º–∏ —É–∑–ª–∞–º–∏)
tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
tailscale amnezia-wg get

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
tailscale amnezia-wg set

# –°–±—Ä–æ—Å –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É WireGuard
tailscale amnezia-wg reset
```

## üõ°Ô∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Amnezia-WG

### –ú—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –∏ –ø–æ–¥–ø–∏—Å–∏

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–ª—å—à–∏–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏ –ø–æ–¥–ø–∏—Å–µ–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–ª—è –æ–±—Ö–æ–¥–∞ DPI. –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —É–∑–ª–∞–º–∏ Tailscale:

```bash
# –ë–∞–∑–æ–≤—ã–π –º—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫
tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'

# –° –ø–æ–¥–ø–∏—Å—è–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (i1-i5)
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>","i2":"<b 0x40><r 12>"}'
```

### –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

–¢—Ä–µ–±—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –í–°–ï–ú–ò —É–∑–ª–∞–º–∏ —ç—Ç–æ–≥–æ —Ñ–æ—Ä–∫–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–ø–æ–¥–ø–∏—Å–∏ ix –ù–ï —Ç—Ä–µ–±—É—é—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è):

```bash
# –û–±—Ñ—É—Å–∫–∞—Ü–∏—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è (s1/s2 –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö)
tailscale amnezia-wg set '{"s1":10,"s2":15}'

# –° –ø–æ–ª—è–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (h1-h4 –¥–ª—è –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'

# –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –ø–æ–¥–ø–∏—Å—è–º–∏ (i1-i5 –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777,"i1":"<b 0xc0><r 32><c><t>"}'
```

## üéØ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

| –¢–∏–ø               | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                                                    | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å  |
| ----------------- | ------------------------------------------------------------ | -------------- |
| **–¢–æ–ª—å–∫–æ –º—É—Å–æ—Ä**  | `{"jc":4,"jmin":64,"jmax":256}`                              | ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç    |
| **–ú—É—Å–æ—Ä+–ø–æ–¥–ø–∏—Å–∏** | `{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>"}`        | ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç    |
| **–†—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ**   | `{"s1":10,"s2":15,"h1":123456,"h2":789012}`                  | ‚ùå –¢–æ–ª—å–∫–æ —Ñ–æ—Ä–∫ |
| **–ü–æ–ª–Ω–∞—è**        | `{"jc":2,"s1":10,"s2":15,"h1":123456,"i1":"<b 0xc0><r 16>"}` | ‚ùå –¢–æ–ª—å–∫–æ —Ñ–æ—Ä–∫ |

> **–£—Ä–æ–≤–µ–Ω—å —Å–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∏–ø–æ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (jc/i1-i5/s1-s2/h1-h4) –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª—É—á—à—É—é –æ–±—Ñ—É—Å–∫–∞—Ü–∏—é, –Ω–æ –∏–∑–±–µ–≥–∞–π—Ç–µ —á—Ä–µ–∑–º–µ—Ä–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (jc) –∏ –ø–æ–¥–ø–∏—Å–µ–π (i1-i5) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ—Ç–µ—Ä—å –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–±–ª–µ–º —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π.

### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- **jc**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (0-10, –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å jmin/jmax –≤–º–µ—Å—Ç–µ)
- **jmin/jmax**: –î–∏–∞–ø–∞–∑–æ–Ω —Ä–∞–∑–º–µ—Ä–∞ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤ –±–∞–π—Ç–∞—Ö (64-1024, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ jc)
- **i1-i5**: –ü–∞–∫–µ—Ç—ã –ø–æ–¥–ø–∏—Å–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ (–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ hex-–¥–∞–Ω–Ω—ã–µ)
- **s1/s2**: –°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤ Init/Response (0-64 –±–∞–π—Ç–∞, —Ç—Ä–µ–±—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö)
- **h1-h4**: –û–±—Ñ—É—Å–∫–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (32-–±–∏—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ 4 –∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ, —Ç—Ä–µ–±—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö)

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä       | –î–∏–∞–ø–∞–∑–æ–Ω         | –û–ø–∏—Å–∞–Ω–∏–µ                                     |
| -------------- | ---------------- | -------------------------------------------- |
| **I1-I5**      | –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ hex | –ü–∞–∫–µ—Ç—ã –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞        |
| **S1, S2**     | 0-64 –±–∞–π—Ç–∞       | –°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤ Init/Response |
| **Jc**         | 0-10             | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –ø–æ—Å–ª–µ I1-I5      |
| **Jmin, Jmax** | 64-1024 –±–∞–π—Ç–∞    | –î–∏–∞–ø–∞–∑–æ–Ω —Ä–∞–∑–º–µ—Ä–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤  |
| **H1-H4**      | 0-4294967295     | 32-–±–∏—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞  |

## üìä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞   | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã          | –°—Ç–∞—Ç—É—Å                   |
| ----------- | -------------------- | ------------------------ |
| **Linux**   | x86_64, ARM64        | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞      |
| **macOS**   | Intel, Apple Silicon | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞      |
| **Windows** | x86_64, ARM64        | ‚úÖ –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ PowerShell |

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ Tailscale

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã, —Å–æ—Ö—Ä–∞–Ω—è—è –≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. –í–∞—à–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏
3. –ù–∞—á–Ω–∏—Ç–µ —Å –±–∞–∑–æ–≤–æ–π –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏: `tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ –∫–∞–∫ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Tailscale –¥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏
- **–ú—É—Å–æ—Ä–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (jc) –∏ –ø–æ–¥–ø–∏—Å–∏ (i1-i5)**: –°–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –ª—é–±—ã–º–∏ —É–∑–ª–∞–º–∏ Tailscale, –≤–∫–ª—é—á–∞—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã. –ö–∞–∂–¥—ã–π —É–∑–µ–ª –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- **–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (s1/s2) –∏ –ø–æ–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ (h1-h4)**: –¢—Ä–µ–±—É—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –í–°–ï–ú–ò —É–∑–ª–∞–º–∏ —ç—Ç–æ–≥–æ —Ñ–æ—Ä–∫–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã —Å –±–∞–∑–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

## üõ†Ô∏è –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π –∑–∞–≥–æ–ª–æ–≤–∫–∞ (h1-h4)

–û–±—Ñ—É—Å–∫–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è WireGuard. –ù—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ 4 –∑–Ω–∞—á–µ–Ω–∏—è –∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ:

```bash
# –ü–µ—Ä–≤—ã–π —É–∑–µ–ª: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–≤–≤–µ–¥–∏—Ç–µ 'random' –¥–ª—è –∫–∞–∂–¥–æ–≥–æ h1-h4)
tailscale amnezia-wg set  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ h1, h2, h3, h4 –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ

# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é JSON
tailscale amnezia-wg get

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å JSON –Ω–∞ –¥—Ä—É–≥–∏–µ —É–∑–ª—ã (–¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å –≤—Å–µ h1-h4)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–µ–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

1. –ó–∞—Ö–≤–∞—Ç–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ —Å –ø–æ–º–æ—â—å—é Wireshark
2. –ò–∑–≤–ª–µ–∫–∏—Ç–µ hex-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
3. –§–æ—Ä–º–∞—Ç —Å–±–æ—Ä–∫–∏: `<b 0xHEX>` (—Å—Ç–∞—Ç–∏—á–Ω—ã–µ), `<r LENGTH>` (—Å–ª—É—á–∞–π–Ω—ã–µ), `<c>` (—Å—á—ë—Ç—á–∏–∫), `<t>` (–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞)
4. –ü—Ä–∏–º–µ—Ä: `<b 0xc0000000><r 16><c><t>` = QUIC-–ø–æ–¥–æ–±–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ + 16 —Å–ª—É—á–∞–π–Ω—ã—Ö –±–∞–π—Ç + —Å—á—ë—Ç—á–∏–∫ + –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞

### –ü–∞–∫–µ—Ç—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ I1‚ÄìI5 (—Ü–µ–ø–æ—á–∫–∞ –ø–æ–¥–ø–∏—Å–µ–π) –∏ CPS (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞)

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º "–æ—Å–æ–±—ã–º" —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ–º (–∫–∞–∂–¥—ã–µ 120 —Å–µ–∫—É–Ω–¥) –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ –ø—è—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö UDP-–ø–∞–∫–µ—Ç–æ–≤ (I1‚ÄìI5) –≤ —Ñ–æ—Ä–º–∞—Ç–µ CPS –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

**–§–æ—Ä–º–∞—Ç CPS:**

```text
i{n} = <tag1><tag2><tag3>...<tagN>
```

**–¢–∏–ø—ã —Ç–µ–≥–æ–≤:**

| –¢–µ–≥ | –§–æ—Ä–º–∞—Ç         | –û–ø–∏—Å–∞–Ω–∏–µ                                       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è        |
| --- | -------------- | ---------------------------------------------- | ------------------ |
| b   | `<b hex_data>` | –°—Ç–∞—Ç–∏—á–Ω—ã–µ –±–∞–π—Ç—ã –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤        | –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ |
| c   | `<c>`          | –°—á—ë—Ç—á–∏–∫ –ø–∞–∫–µ—Ç–æ–≤ (32-–±–∏—Ç, —Å–µ—Ç–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤ —Ü–µ–ø–∏  |
| t   | `<t>`          | Unix –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ (32-–±–∏—Ç, —Å–µ—Ç–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫) | –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –≤ —Ü–µ–ø–∏  |
| r   | `<r length>`   | –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–µ —Å–ª—É—á–∞–π–Ω—ã–µ –±–∞–π—Ç—ã       | length ‚â§ 1000      |

**–ü—Ä–∏–º–µ—Ä:**

```text
i1 = <b 0xf6ab3267fa><c><b 0xf6ab><t><r 10>
```

> ‚ö†Ô∏è –ï—Å–ª–∏ i1 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –≤—Å—è —Ü–µ–ø–æ—á–∫–∞ (I2‚ÄìI5) –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.

#### –ó–∞—Ö–≤–∞—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é Wireshark

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Amnezia-WG –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã i1‚Äìi5
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Wireshark –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ UDP-–ø–æ—Ä—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–ª—å—Ç—Ä: `udp.port == 51820`)
3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–∞–∫–µ—Ç—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏, –∏–∑–≤–ª–µ–∫–∞–π—Ç–µ –ø–æ–¥–ø–∏—Å–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º. [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Amnezia-WG](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
tailscale version          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –∫–ª–∏–µ–Ω—Ç–∞
tailscale amnezia-wg get   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Amnezia-WG
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

```bash
# –°–±—Ä–æ—Å –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É WireGuard
tailscale amnezia-wg reset

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128}'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ (Linux)
sudo journalctl -u tailscaled -f
```

### –ü—Ä–æ–±–ª–µ–º—ã Windows PowerShell

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º JSON:

```powershell
tailscale amnezia-wg set  # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```

## ü§ù –°—Å—ã–ª–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **–ë–∏–Ω–∞—Ä–Ω—ã–µ —Ä–µ–ª–∏–∑—ã**: [LiuTangLei/tailscale](https://github.com/LiuTangLei/tailscale/releases)
- **–ü—Ä–æ–±–ª–µ–º—ã —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞**: [GitHub Issues](https://github.com/LiuTangLei/tailscale-awg-installer/issues)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Amnezia-WG**: [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–õ–∏—Ü–µ–Ω–∑–∏—è BSD 3-Clause (—Ç–∞–∫–∞—è –∂–µ –∫–∞–∫ —É Tailscale)

---

**‚ö†Ô∏è –û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –¢–æ–ª—å–∫–æ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏ –∑–∞–∫–æ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ—Å—É—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞.
