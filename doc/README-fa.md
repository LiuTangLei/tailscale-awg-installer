
# Tailscale ุจุง AmneziaโWG 2.0 (v1.88.2+)

[![GitHub Release](https://img.shields.io/github/v/release/LiuTangLei/tailscale)](https://github.com/LiuTangLei/tailscale/releases/latest) [![Platform Support](https://img.shields.io/badge/platform-Linux%20|%20macOS%20|%20Windows%20|%20Android-blue)](https://github.com/LiuTangLei/tailscale/releases/latest) [![License](https://img.shields.io/badge/license-BSD--3--Clause-green)](../LICENSE)

ูุณุฎู ุชููุชโุดุฏู Tailscale ุจุง AmneziaโWG 2.0: ุชุฑุงูฺฉ ุฒุงุฆุฏุ ุงูุถุงูุง ูพุฑูุชฺฉูุ ู ูพููุงูโุณุงุฒ ุฏุณุชโุฏู/ูุฏุฑ ุจุฑุง ุนุจูุฑ ุงุฒ DPI ู ููุชุฑูฺฏ. ุชุง ููุช ูพุงุฑุงูุชุฑูุง AWG ุฑุง ุชูุธู ูฺฉูุฏุ ูุงููุฏ ูุณุฎู ุฑุณู ุนูู ูโฺฉูุฏ.

ุฒุจุงูโูุง: [English](../README.md) | [ไธญๆ](README-zh.md) | [ูุงุฑุณ](README-fa.md) | [ะัััะบะธะน](README-ru.md)

ูุณุชูุฏุงุช AWG 1.5: [README-awg-v1.5.md](README-awg-v1.5.md)

## ุชุบุฑุงุช ูุงุณุงุฒฺฏุงุฑ (v1.88.2+)

- h1 ุชุง h4 ุจู ยซุจุงุฒู [ฺฉูููุ ุจุดูู]ยป ุชุจุฏู ุดุฏูโุงูุฏ ู ูุจุงุฏ ุจุง ูู ููโูพูุดุงู ุฏุงุดุชู ุจุงุดูุฏ
- s3 ู s4 ุงุถุงูู ุดุฏูโุงูุฏ (ุนูุงูู ุจุฑ s1 ู s2)
- ุชููุฏ ุฎูุฏฺฉุงุฑ ุชุนุงูู: ููฺฏุงู ุงุฌุฑุง `tailscale awg set` ูพุงู ุฒุฑ ุฑุง ูโุจูุฏ:
  Do you want to generate random AWG parameters automatically? [Y/n]:
  ุจุง ูุดุฑุฏู Enter ููู ูพุงุฑุงูุชุฑูุง ุจู ุฌุฒ i1โi5 ุจูโุตูุฑุช ุงูู ู ุชุตุงุฏู ุชููุฏ ูโุดููุฏ

ูพฺฉุฑุจูุฏโูุง 1.x ุจุง 2.0 ูุงุณุงุฒฺฏุงุฑูุฏ. ุจุฎุด ยซููุงุฌุฑุช ุงุฒ 1.xยป ุฑุง ุจุจูุฏ.

## ูุตุจ

| ูพูุชูุฑู | ุฏุณุชูุฑ |
| --- | --- |
| ูููฺฉุณ | `curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh \| bash` |
| macOS* | `curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh \| bash` |
| ููุฏูุฒ | `iwr -useb https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1 \| iex` |
| ุงูุฏุฑูุฏ | ุฏุงูููุฏ APK ุงุฒ [releases](https://github.com/LiuTangLei/tailscale-android/releases) |

macOS: ุงุณฺฉุฑูพุช ุงุฒ ูุณุฎู CLI tailscaled ุงุณุชูุงุฏู ูโฺฉูุฏุ ุงฺฏุฑ Tailscale.app ุฑุณู ูพุฏุง ุดูุฏุ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุฏุงุฎู ูพุดููุงุฏ ุญุฐู ูโุฏูุฏ.

ุงูุฏุฑูุฏ ูโุชูุงูุฏ ูพฺฉุฑุจูุฏ AWG ุฑุง ุงุฒ ฺฉ ฺฏุฑู ุฏฺฏุฑ ยซุฏุฑุงูุชยป ฺฉูุฏ (ุฏฺฉูู Sync).

![Android Sync](sync1.jpg)

### Docker Compose

ุฏุฑ ูุฎุฒู ูุงู `docker-compose.yml` ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ฺฉุงูุชูุฑ `tailscaled` ุจุง ูพุดุชุจุงู AWG ุฑุง ุจุงูุง ูโุขูุฑุฏ:

1. ุณุฑูุณ ุฑุง ุงุฌุฑุง ฺฉูุฏ: `docker compose up -d`
2. ุฏุงุฎู ฺฉุงูุชูุฑ ุงุญุฑุงุฒ ููุช ฺฉูุฏ: `docker compose exec tailscaled tailscale up` (ุจุฑุง Headscale ุฎูุฏูุฒุจุงู `--login-server https://your-headscale-domain` ุฑุง ุงุถุงูู ฺฉูุฏ)
3. ูพุณ ุงุฒ ูุฑูุฏุ ููู ุฏุณุชูุฑุงุช ุชุนุงูู ูุดุงุจู ูุตุจ ูุญู ูุณุชูุฏุ ูุซู `docker compose exec tailscaled tailscale awg sync`

ูพูุชูุฑูโูุง ูพุดุชุจุงูโุดุฏู ููุงู ููุงุฑุฏ ุงูุฌ ุฑุณู Docker ุชูโุงุณฺฉู ูุณุชูุฏ.

## ุดุฑูุน ุณุฑุน

ูฺฉุชู: `tailscale amnezia-wg` = `tailscale awg`

1. ูุฑูุฏ

```bash
tailscale up
# Headscale
tailscale up --login-server https://your-headscale-domain
```

1. ุชูุธู AWG (ุชููุฏ ุฎูุฏฺฉุงุฑ ุชูุตู ูโุดูุฏ)

```bash
tailscale awg set
```

ุฏุฑ ูพุงู ุชููุฏ ุฎูุฏฺฉุงุฑ Enter ุฑุง ูุดุงุฑ ุฏูุฏุ ููู ูพุงุฑุงูุชุฑูุง ุจู ุฌุฒ i1โi5 ุณุงุฎุชู ูโุดููุฏ.

1. ููฺฏุงูโุณุงุฒ ุฑู ุฏุณุชฺฏุงูโูุง ุฏฺฏุฑ

- ุฏุณฺฉุชุงูพ: `tailscale awg sync`
- ุงูุฏุฑูุฏ: ุฏฺฉูู Sync

1. ุฑุฒุชูุธู ุงุฎุชุงุฑ: ุฏูุจุงุฑู `tailscale awg set` ุฑุง ุงุฌุฑุง ฺฉูุฏุ ุงฺฏุฑ ุงูุถุง ูุงุฒู ูุณุช i1โi5 ุฑุง ุฎุงู ุจฺฏุฐุงุฑุฏ.

1. ุฏุณุชูุฑุงุช ููุฏ

```bash
tailscale awg get
tailscale awg reset
```

## ูุงุจูุชโูุง ู ูุซุงูโูุง

- ุชุฑุงูฺฉ ุฒุงุฆุฏ ู ุงูุถุงูุง (ุณุงุฒฺฏุงุฑ ุจุง ฺฏุฑูโูุง ุงุณุชุงูุฏุงุฑุฏ)

```bash
tailscale awg set '{"jc":4,"jmin":64,"jmax":256}'
tailscale awg set '{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0x40><r 12>"}'
```

- ูพููุงูโุณุงุฒ ูพุฑูุชฺฉู (ููู ฺฏุฑูโูุง ุจุงุฏ ููู ูุณุฎู ุฑุง ุงุฌุฑุง ฺฉููุฏุ s1โs4 ู h1โh4 ฺฉุณุงูุ i1โi5 ูุงุฒู ูุณุช ฺฉุณุงู ุจุงุดูุฏ)

```bash
tailscale awg set '{"s1":10,"s2":15,"s3":8,"s4":0}'
tailscale awg set '{"s1":10,"s2":15,"s3":8,"s4":0,"h1":{"min":100000,"max":200000},"h2":{"min":300000,"max":350000},"h3":{"min":400000,"max":450000},"h4":{"min":500000,"max":550000}}'
tailscale awg set '{"s1":10,"s2":15,"s3":8,"s4":0,"h1":{"min":100000,"max":200000},"h2":{"min":300000,"max":350000},"h3":{"min":400000,"max":450000},"h4":{"min":500000,"max":550000},"i1":"<b 0xc0><r 32><c><t>"}'
```

## ูุฑุฌุน ูพฺฉุฑุจูุฏ

- ูพุงู (ุณุงุฒฺฏุงุฑ ุจุง ฺฉูุงูุช ุงุณุชุงูุฏุงุฑุฏ)

| ฺฉุงุฑุจุฑุฏ | JSON | ุณุงุฒฺฏุงุฑ |
| --- | --- | --- |
| ููุท ุชุฑุงูฺฉ ุฒุงุฆุฏ | `{"jc":4,"jmin":64,"jmax":256}` | โ |
| ุฒุงุฆุฏ + ุงูุถุง | `{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>"}` | โ |

- ูพุดุฑูุชู (ููู ฺฏุฑูโูุง s1โs4 ู h1โh4 ูุดุชุฑฺฉ)

| ฺฉุงุฑุจุฑุฏ | ูุซุงู | ุชูุถุญ |
| --- | --- | --- |
| ูพุดููุฏ ุฏุณุชโุฏู | `{"s1":10,"s2":15,"s3":8,"s4":0}` | s1โs4 ุจุงุฏ ุฏุฑ ููู ฺฏุฑูโูุง ฺฉุณุงู ุจุงุดุฏ |
| ุจุงุฒูโูุง ูุฏุฑ | `{"s1":10,"s2":15,"s3":8,"s4":0,"h1":{"min":100000,"max":200000},"h2":{"min":300000,"max":350000},"h3":{"min":400000,"max":450000},"h4":{"min":500000,"max":550000}}` | h1โh4 ุจุงุฒูโูุง ุจุฏูู ููโูพูุดุงู |
| ุชุฑฺฉุจ | `{"jc":2,"s1":10,"s2":15,"s3":8,"s4":0,"h1":{"min":100000,"max":200000},"h2":{"min":300000,"max":350000},"h3":{"min":400000,"max":450000},"h4":{"min":500000,"max":550000},"i1":"<b 0xc0><r 16>"}` | ุงูุถุง ุงุฎุชุงุฑ |

ูพุงุฑุงูุชุฑูุง:

- jc (ฐโฑฐ)ุ jmin/jmax (ถดโฑฐฒด)
- i1โi5 ุฒูุฌุฑู ุงูุถุง ุงุฎุชุงุฑ
- s1โs4 ูพุดููุฏ/ููุฏูุง ุฏุณุชโุฏู (ุจู ููู ฺฏุฑูโูุง AWG ฺฉุณุงู)
- h1โh4 ุจุงุฒูโูุง ูุฏุฑ {"min": ฺฉููู, "max": ุจุดูู}ุ ฺูุงุฑ ุจุงุฒู ูุจุงุฏ ููโูพูุดุงู ุฏุงุดุชู ุจุงุดูุฏุ ุง ููู ุชูุธู ุดููุฏ ุง ูฺุ ุจู ููู ฺฏุฑูโูุง ฺฉุณุงู

## ูพุดุชุจุงู ูพูุชูุฑู

| ูพูุชูุฑู | ูุนูุงุฑ | ูุถุนุช |
| --- | --- | --- |
| ูููฺฉุณ | x86_64, ARM64 | โ ฺฉุงูู |
| macOS | Intel, Apple Silicon | โ ฺฉุงูู |
| ููุฏูุฒ | x86_64, ARM64 | โ ูุตุจโฺฉููุฏู |
| ุงูุฏุฑูุฏ | ARM64, ARM | โ APK (ููุท ููฺฏุงูโุณุงุฒ AWG) |

## ููุงุฌุฑุช ุงุฒ 1.x

1. ููู ฺฏุฑูโูุง ุฑุง ุจู v1.88.2+ ุงุฑุชูุง ุฏูุฏ
1. ุฏุฑ ุตูุฑุช ูุงุฒ ูพฺฉุฑุจูุฏ 1.x ุฑุง ุฑุณุช ฺฉูุฏ

```bash
tailscale awg reset
```

1. ุฑู ูุฑ ุฏุณุชฺฏุงู `tailscale awg set` ุฑุง ุงุฌุฑุง ฺฉุฑุฏู ู Enter ุจุฒูุฏ (ุจู ุฌุฒ i1โi5)
1. `tailscale awg get` ุฑุง ุชูุฒุน ฺฉูุฏ ุง `tailscale awg sync` ุฑุง ุงุณุชูุงุฏู ฺฉูุฏ
1. ูุทูุฆู ุดูุฏ s1โs4 ู h1โh4 ุจู ฺฏุฑูโูุง ฺฉุณุงู ู ุจุงุฒูโูุง h1โh4 ุจุฏูู ููโูพูุดุงูโุงูุฏ

ุชูุฌู: ูพููุงูโุณุงุฒ ุจู 1.x ู 2.0 ุณุงุฒฺฏุงุฑ ูุณุช.

## ูพููุฏูุง

- Releases: <https://github.com/LiuTangLei/tailscale/releases>
- Android APK: <https://github.com/LiuTangLei/tailscale-android/releases>
- Issues ูุตุจโฺฉููุฏู: <https://github.com/LiuTangLei/tailscale-awg-installer/issues>
- ูุณุชูุฏุงุช AmneziaโWG: <https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted>

## ูุฌูุฒ

BSD 3โClause (ููุงููุฏ ูพุฑูฺู upstream)

## ๐ ูุตุจ

| ูพูุชูุฑู                    | ุฏุณุชูุฑ / ุงูุฏุงู                                                                                            |
| ------------------------- | -------------------------------------------------------------------------------------------------------- | ----- |
| ูููฺฉุณ                    | `curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh   | bash` |
| macOS\*                   | `curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh   | bash` |
| ููุฏูุฒ (PowerShell ุงุฏูู) | `iwr -useb https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1 | iex`  |
| ุงูุฏุฑูุฏ                   | ุฏุงูููุฏ APK: [ูุณุฎูโูุง](https://github.com/LiuTangLei/tailscale-android/releases)                          |

**\*ูฺฉุชู macOS:** ุจู ุฏูู ูุญุงูุธุชโูุง ฺฉูพุงุฑฺฺฏ ุณุณุชูุ ูุตุจโฺฉููุฏู ุงุฒ Tailscale ููุท CLI ุงุณุชูุงุฏู ูโฺฉูุฏ. ุงฺฏุฑ Tailscale.app ุฑุณู ุดูุงุณุง ุดูุฏุ ุดูุง ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุนุงุฑุถ ุฑุงูููุง ูโุดูุฏ ุชุง ุขู ุฑุง ุญุฐู ฺฉูุฏ.

ูุณุฎู ุงูุฏุฑูุฏ ุฏุฑ ุญุงู ุญุงุถุฑ ุงุฒ ููฺฏุงูโุณุงุฒ ูพฺฉุฑุจูุฏ AWG (ุฏุฑุงูุช) ุงุฒ ฺฉ ุฏุณุชฺฏุงู ุฏฺฏุฑ ฺฉู ูุจูุงู ูพฺฉุฑุจูุฏ ุดุฏูุ ูพุดุชุจุงู ูโฺฉูุฏ. ุงุฒ ุฏฺฉูู Sync ุฏุฑ ุฏุงุฎู ุจุฑูุงูู ุงุณุชูุงุฏู ฺฉูุฏ:

![ููููู ููฺฏุงูโุณุงุฒ AWG ุฏุฑ ุงูุฏุฑูุฏ](doc/sync1.jpg)

### ูุฑูุฑูุง (ุงุฎุชุงุฑ)

ุงฺฏุฑ GitHub ฺฉูุฏ ุง ูุณุฏูุฏ ุงุณุชุ ูโุชูุงูุฏ ฺฉ ูุฑูุฑ ูพุดููุฏ (ูุซูุงู `https://your-mirror-site.com`) ุฑุง ุงุฒ ุทุฑู [gh-proxy](https://github.com/hunshcn/gh-proxy) ุฎูุฏุชุงู ูุฒุจุงู ฺฉูุฏ:

```bash
# ูููฺฉุณ
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash -s -- --mirror https://your-mirror-site.com

# macOS
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash -s -- --mirror https://your-mirror-site.com
```

```powershell
# ููุฏูุฒ
$scriptContent = (iwr -useb https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1).Content; $scriptBlock = [scriptblock]::Create($scriptContent); & $scriptBlock -MirrorPrefix \'https://your-mirror-site.com/\'
```

ุณุงุณุช ุงุฌุฑุง PowerShell (ุฏุฑ ุตูุฑุช ูุณุฏูุฏ ุจูุฏู): `Set-ExecutionPolicy RemoteSigned` (ุง `Bypass -Scope Process`)

### ูฺฉุงุช ูุตุจ macOS

- **ุงุณุชูุฑุงุฑ ููุท CLI**: ุงุณุชูุงุฏู ุงุฒ `tailscaled` ูุชูโุจุงุฒ (ุฑุงุจุท utun) ุจุฑุง ุณุงุฒฺฏุงุฑ ฺฉุงูู ุจุง ูุณุฎูโูุง ุณูุงุฑุด
- **ูุฏุฑุช ุชุนุงุฑุถ ุจุฑูุงูู**: ุชุดุฎุต ุฎูุฏฺฉุงุฑ ู ุงุฑุงุฆู ฺฏุฒูู ุญุฐู Tailscale.app ุฑุณู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุนุงุฑุถ ุงูุฒูููโูุง ุณุณุชู

## โก ุดุฑูุน ุณุฑุน

> ูฺฉุชู: `tailscale amnezia-wg` โ `tailscale awg` (ูุงู ูุณุชุนุงุฑ)

ฑ. ูุงุฑุฏ ุดูุฏ:

```bash
# ุฑุณู
tailscale up
# Headscale
tailscale up --login-server https://your-headscale-domain
```

ฒ. ุฏุณุชฺฏุงู ุงูู (ุชููุฏ ููุงุฏุฑ ุงุตู ูุดุชุฑฺฉ):

```bash
tailscale awg set
```

ุจุฑุง H1 ุชุง H4 ฺฉููู `random` ุฑุง ูุงุฑุฏ ฺฉูุฏ ุชุง ููุงุฏุฑ ุงูู ณฒ ุจุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุชููุฏ ุดููุฏ.

ณ. ููฺฏุงูโุณุงุฒ ุฏุณุชฺฏุงูโูุง ุฏฺฏุฑ:

- ุฏุณฺฉุชุงูพ: `tailscale awg sync`
- ุงูุฏุฑูุฏ: ุฑู ุฏฺฉูู Sync ุถุฑุจู ุจุฒูุฏ (ุชุตูุฑ ุจุงูุง ุฑุง ุจุจูุฏ)
  ด. ุชูุธูุงุช ุงุฎุชุงุฑ ุจุฑุง ูุฑ ุฏุณุชฺฏุงู: ุฏุณุชูุฑ `tailscale awg set` ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ฺฉุฑุฏู ู ููุท ููุฏูุง ุบุฑูุดุชุฑฺฉ ุฑุง ุชุบุฑ ุฏูุฏ (S1/S2/H1โH4 ุฑุง ุจุฏูู ุชุบุฑ ุจุงู ุจฺฏุฐุงุฑุฏ).
  ต. ุฏุณุชูุฑุงุช ููุฏ:

```bash
tailscale awg get     # ููุงุด JSON
tailscale awg reset   # ุจุงุฒฺฏุดุช ุจู WireGuard ูุนููู
```

## ๐ก๏ธ ูฺฺฏโูุง

### ุชุฑุงูฺฉ ุฒุงุฆุฏ ู ุงูุถุงูุง

ุจุณุชูโูุง ุฌุนู ู ุงูุถุงูุง ูพุฑูุชฺฉู ุฑุง ุจุฑุง ูุฑุงุฑ ุงุฒ DPI ุงุถุงูู ฺฉูุฏ. ุจุง ุฏุณุชฺฏุงูโูุง ุงุณุชุงูุฏุงุฑุฏ Tailscale ุณุงุฒฺฏุงุฑ ุงุณุช:

```bash
# ุชุฑุงูฺฉ ุฒุงุฆุฏ ูพุงู
tailscale awg set \'{\"jc\":4,\"jmin\":64,\"jmax\":256}\'

# ุจุง ุงูุถุงูุง ูพุฑูุชฺฉู (i1-i5)
tailscale awg set \'{\"jc\":2,\"jmin\":64,\"jmax\":128,\"i1\":\"<b 0xc0><r 16>\",\"i2\":\"<b 0x40><r 12>\"}\'
```

### ูพููุงูโุณุงุฒ ูพุฑูุชฺฉู

ูุงุฒ ุฏุงุฑุฏ ฺฉู ุชูุงู ุฏุณุชฺฏุงูโูุง ุงุฒ ุงู ูุณุฎู (fork) ุจุง ุชูุธูุงุช ฺฉุณุงู ุงุณุชูุงุฏู ฺฉููุฏ (ุงูุถุงูุง ix ูุงุฒ ุจู ุชุทุงุจู ูุฏุงุฑูุฏ):

```bash
# ูุจููโุณุงุฒ ุฏุณุชโุฏู (s1/s2 ุจุงุฏ ุฏุฑ ุชูุงู ุฏุณุชฺฏุงูโูุง ฺฉุณุงู ุจุงุดุฏ)
tailscale awg set \'{\"s1\":10,\"s2\":15}\'

# ุจุง ููุฏูุง ูุฏุฑ (h1-h4 ุจุฑุง ูุจููโุณุงุฒ ูพุฑูุชฺฉูุ ุจุงุฏ ุฏุฑ ุชูุงู ุฏุณุชฺฏุงูโูุง ฺฉุณุงู ุจุงุดุฏ)
tailscale awg set \'{\"s1\":10,\"s2\":15,\"h1\":3946285740,\"h2\":1234567890,\"h3\":987654321,\"h4\":555666777}\'

# ุชุฑฺฉุจ ุจุง ุงูุถุงูุง (i1-i5 ูโุชูุงูุฏ ุฏุฑ ูุฑ ุฏุณุชฺฏุงู ูุชูุงูุช ุจุงุดุฏ)
tailscale awg set \'{\"s1\":10,\"s2\":15,\"h1\":3946285740,\"h2\":1234567890,\"h3\":987654321,\"h4\":555666777,\"i1\":\"<b 0xc0><r 32><c><t>\"}\'
```

## ๐ฏ ูพฺฉุฑุจูุฏ

ูพุงู (ุจุง ฺฉูุงูุชโูุง ุงุณุชุงูุฏุงุฑุฏ ฺฉุงุฑ ูโฺฉูุฏ):

| ููุน             | JSON                                                            | ุณุงุฒฺฏุงุฑ |
| --------------- | --------------------------------------------------------------- | ------ |
| ููุท ุชุฑุงูฺฉ ุฒุงุฆุฏ | `{\"jc\":4,\"jmin\":64,\"jmax\":256}`                           | โ ุจูู |
| ุฒุงุฆุฏ + ุงูุถุง     | `{\"jc\":2,\"jmin\":64,\"jmax\":128,\"i1\":\"<b 0xc0><r 16>\"}` | โ ุจูู |

ูพุดุฑูุชู (ุชูุงู ุฏุณุชฺฏุงูโูุง ุจุงุฏ ุงุฒ ุงู ูุณุฎู ุงุณุชูุงุฏู ฺฉุฑุฏู ู ููุงุฏุฑ S1/S2/H1โH4 ุฑุง ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑูุฏ):

| ูุฏู               | ูุซุงู                                                                                                               | ูฺฉุงุช                           |
| ----------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------ |
| ูพุดููุฏูุง ุฏุณุชโุฏู | `{\"s1\":10,\"s2\":15}`                                                                                            | s1/s2: ฐโถด ุจุงุช               |
| ูุจููโุณุงุฒ ูุฏุฑ     | `{\"s1\":10,\"s2\":15,\"h1\":123456,\"h2\":789012,\"h3\":345678,\"h4\":901234}`                                    | ููู h1โh4 ุฑุง ุชูุธู ฺฉูุฏ        |
| ุชุฑฺฉุจ            | `{\"jc\":2,\"s1\":10,\"s2\":15,\"h1\":123456,\"h2\":789012,\"h3\":345678,\"h4\":901234,\"i1\":\"<b 0xc0><r 16>\"}` | ุชุฑุงูฺฉ ุฒุงุฆุฏ/ุงูุถุงูุง ุงุฎุชุงุฑ ุงุณุช |

ูพุงุฑุงูุชุฑูุง:

- jc (ฐโฑฐ) ุจุง jmin/jmax (ถดโฑฐฒด): ุชุนุฏุงุฏ ุจุณุชูโูุง ุฒุงุฆุฏ ู ูุญุฏูุฏู ุงูุฏุงุฒู ุขูโูุง
- i1โi5: ุฒูุฌุฑู ุงูุถุง ุงุฎุชุงุฑ (ุฒุจุงู ฺฉูฺฺฉ ุจุง ูุฑูุช ูฺฏุฒ)
- s1/s2 (ฐโถด ุจุงุช): ูพุดููุฏูุง ูพุฏูฺฏ ุฏุณุชโุฏู (ุจุงุฏ ุฏุฑ ุชูุงู ุฏุณุชฺฏุงูโูุง AWG ฺฉุณุงู ุจุงุดุฏ)
- h1โh4 (ุงุนุฏุงุฏ ุตุญุญ ณฒ ุจุช): ูุจููโุณุงุฒ ูุฏุฑ (ููู ุง ูฺฺฉุฏุงูุ ุจุงุฏ ฺฉุณุงู ุจุงุดุฏ). ููุงุฏุฑ ุชุตุงุฏู ู ููุญุตุฑุจูโูุฑุฏ ุงูุชุฎุงุจ ฺฉูุฏ (ูพุดููุงุฏ: ุจู ต ุชุง ฒฑดทดธณถดท)

ูฺฉุงุช: ุชุนุฏุงุฏ ุฒุงุฏ ุจุณุชูโูุง ุฒุงุฆุฏ ุง ุฒูุฌุฑูโูุง ุงูุถุง ุทููุงู ุจุงุนุซ ุงูุฒุงุด ุชุฃุฎุฑ ู ูุตุฑู ูพููุง ุจุงูุฏ ูโุดูุฏ.

## ๐ ูพุดุชุจุงู ุงุฒ ูพูุชูุฑูโูุง

| ูพูุชูุฑู  | ูุนูุงุฑ               | ูุถุนุช                       |
| ------- | -------------------- | --------------------------- |
| ูููฺฉุณ  | x86_64, ARM64        | โ ฺฉุงูู                     |
| macOS   | Intel, Apple Silicon | โ ฺฉุงูู                     |
| ููุฏูุฒ  | x86_64, ARM64        | โ ูุตุจโฺฉููุฏู                |
| ุงูุฏุฑูุฏ | ARM64, ARM           | โ APK (AWG ููุท ููฺฏุงูโุณุงุฒ) |

## ๐ ููุงุฌุฑุช ุงุฒ Tailscale ุฑุณู

ฑ. ูุตุจโฺฉููุฏู ุฑุง ุงุฌุฑุง ฺฉูุฏ - ูุงูโูุง ุจุงูุฑ ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุฌุงฺฏุฒู ูโุดููุฏ ุฏุฑ ุญุงู ฺฉู ุชูุธูุงุช ุดูุง ุญูุธ ูโุดูุฏ.
ฒ. ุงุญุฑุงุฒ ููุช ู ูพฺฉุฑุจูุฏ ููุฌูุฏ ุดูุง ุจุฏูู ุชุบุฑ ุจุงู ูโูุงูุฏ.
ณ. ุจุง ูุจููโุณุงุฒ ูพุงู ุดุฑูุน ฺฉูุฏ: `tailscale awg set \'{\"jc\":4,\"jmin\":64,\"jmax\":256}\'`

## โ๏ธ ูฺฉุงุช

- ุชุง ุฒูุงู ฺฉู ูพฺฉุฑุจูุฏ AWG ุงุนูุงู ูุดูุฏุ ูุงููุฏ ูุณุฎู ูุนููู ุนูู ูโฺฉูุฏ.
- ุชุฑุงูฺฉ ุฒุงุฆุฏ/ุงูุถุงูุง ุจุง ฺฉูุงูุชโูุง ุงุณุชุงูุฏุงุฑุฏ ุณุงุฒฺฏุงุฑ ูุณุชูุฏ (ููุงุฏุฑ ูโุชูุงููุฏ ุฏุฑ ูุฑ ุฏุณุชฺฏุงู ูุชูุงูุช ุจุงุดูุฏ).
- s1/s2 ู h1โh4 ูุงุฒ ุฏุงุฑูุฏ ฺฉู ูุฑ ุฏุณุชฺฏุงู ุฏุฑ ุญุงู ุงุฑุชุจุงุทุ ููุงุฏุฑ ฺฉุณุงู ุฑุง ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑุฏ.
- ุงุฒ ูพฺฉุฑุจูุฏโูุง ุฎูุฏ ูุณุฎู ูพุดุชุจุงู ุชูู ฺฉูุฏ (ุจุง ุงุณุชูุงุฏู ุงุฒ `tailscale awg get`).

## ๐๏ธ ุงุณุชูุงุฏู ูพุดุฑูุชู

### ูพฺฉุฑุจูุฏ ููุฏ ูุฏุฑ (h1-h4)

ูุจููโุณุงุฒ ูพุฑูุชฺฉู ุจุฑุง ูุฑุงุฑ ุงุฒ ุดูุงุณุง WireGuard. ุจุงุฏ ูุฑ ด ููุฏุงุฑ ุฑุง ุชูุธู ฺฉูุฏ ุง ูฺฺฉุฏุงู:

```bash
# ุฏุณุชฺฏุงู ุงูู: ุชููุฏ ููุงุฏุฑ ุชุตุงุฏู (ุจุฑุง ูุฑ h1-h4 ฺฉููู \'random\' ุฑุง ูุงุฑุฏ ฺฉูุฏ)
tailscale awg set  # ููฺฏุงู ุฏุฑุฎูุงุณุชุ ููู h1, h2, h3, h4 ุฑุง ุชูุธู ฺฉูุฏ

# ุฏุฑุงูุช ูพฺฉุฑุจูุฏ JSON
tailscale awg get

# ฺฉู JSON ุฑุง ุฏุฑ ุฏุณุชฺฏุงูโูุง ุฏฺฏุฑ ฺฉูพ ฺฉูุฏ (ุจุงุฏ ุดุงูู ููู h1-h4 ุจุงุดุฏ)
tailscale awg set \'{\"s1\":10,\"s2\":15,\"h1\":3946285740,\"h2\":1234567890,\"h3\":987654321,\"h4\":555666777}\'
```

### ุงุฌุงุฏ ุงูุถุงูุง ูพุฑูุชฺฉู

ฑ. ุชุฑุงูฺฉ ูุงูุน ุฑุง ุจุง Wireshark ุถุจุท ฺฉูุฏ.
ฒ. ุงูฺฏููุง ูฺฏุฒ ุฑุง ุงุฒ ูุฏุฑูุง ุงุณุชุฎุฑุงุฌ ฺฉูุฏ.
ณ. ูุฑูุช ุฑุง ุจุณุงุฒุฏ: `<b 0xHEX>` (ุซุงุจุช)ุ `<r LENGTH>` (ุชุตุงุฏู)ุ `<c>` (ุดูุงุฑูุฏู)ุ `<t>` (ููุฑ ุฒูุงู).
ด. ูุซุงู: `<b 0xc0000000><r 16><c><t>` = ูุฏุฑ ุดุจู-QUIC + ฑถ ุจุงุช ุชุตุงุฏู + ุดูุงุฑูุฏู + ููุฑ ุฒูุงู.

### ุจุณุชูโูุง ูุจููโุณุงุฒ I1โI5 (ุฒูุฌุฑู ุงูุถุง) ู CPS (ุงูุถุง ูพุฑูุชฺฉู ุณูุงุฑุด)

ูุจู ุงุฒ ูุฑ ุฏุณุชโุฏู "ูฺู" (ูุฑ ฑฒฐ ุซุงูู)ุ ฺฉูุงูุช ููฺฉู ุงุณุช ุชุง ูพูุฌ ุจุณุชู UDP ุณูุงุฑุด (I1โI5) ุฑุง ุฏุฑ ูุฑูุช CPS ุจุฑุง ุชููุฏ ูพุฑูุชฺฉู ุงุฑุณุงู ฺฉูุฏ.

**ูุฑูุช CPS:**

```text
i{n} = <tag1><tag2><tag3>...<tagN>
```

**ุงููุงุน ุชฺฏ:**

| ุชฺฏ  | ูุฑูุช           | ุชูุถุญุงุช                                     | ูุญุฏูุฏุชโูุง        |
| --- | -------------- | ------------------------------------------- | ----------------- |
| b   | `<b hex_data>` | ุจุงุชโูุง ุซุงุจุช ุจุฑุง ุดุจูโุณุงุฒ ูพุฑูุชฺฉูโูุง      | ุทูู ุฏูุฎูุงู        |
| c   | `<c>`          | ุดูุงุฑูุฏู ุจุณุชู (ณฒ ุจุชุ ุชุฑุชุจ ุจุงุช ุดุจฺฉู)     | ฺฉุชุง ุฏุฑ ูุฑ ุฒูุฌุฑู |
| t   | `<t>`          | ููุฑ ุฒูุงู ููฺฉุณ (ณฒ ุจุชุ ุชุฑุชุจ ุจุงุช ุดุจฺฉู) | ฺฉุชุง ุฏุฑ ูุฑ ุฒูุฌุฑู |
| r   | `<r length>`   | ุจุงุชโูุง ุชุตุงุฏู ุงูู ุงุฒ ูุธุฑ ุฑูุฒูฺฏุงุฑ         | ุทูู โค ฑฐฐฐ        |

**ูุซุงู:**

```text
i1 = <b 0xf6ab3267fa><c><b 0xf6ab><t><r 10>
```

> โ๏ธ ุงฺฏุฑ i1 ุชูุธู ูุดุฏู ุจุงุดุฏุ ฺฉู ุฒูุฌุฑู (I2โI5) ูุงุฏุฏู ฺฏุฑูุชู ูโุดูุฏ.

#### ุถุจุท ุจุณุชูโูุง ูุจููโุณุงุฒ ูุงูุน ุจุง Wireshark

ฑ. Amnezia-WG ุฑุง ุดุฑูุน ฺฉุฑุฏู ู ูพุงุฑุงูุชุฑูุง i1โI5 ุฑุง ูพฺฉุฑุจูุฏ ฺฉูุฏ.
ฒ. ุงุฒ Wireshark ุจุฑุง ูุธุงุฑุช ุจุฑ ูพูุฑุช UDP ุงุณุชูุงุฏู ฺฉูุฏ (ูุซูุงู ููุชุฑ: `udp.port == 51820`).
ณ. ุจุณุชูโูุง ูุจููโุณุงุฒ ุฑุง ูุดุงูุฏู ู ุชุญูู ฺฉุฑุฏู ู ุฏุฑ ุตูุฑุช ูุงุฒ ุงูุถุงูุง ูพุฑูุชฺฉู ุฑุง ุงุณุชุฎุฑุงุฌ ฺฉูุฏ.

ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑุ ุจู [ูุณุชูุฏุงุช ุฑุณู Amnezia-WG](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted) ูุฑุงุฌุนู ฺฉูุฏ.

## ๐ ุนุจโุงุจ

### ุชุฃุฏ ูุตุจ

```bash
tailscale version          # ุจุฑุฑุณ ูุณุฎู ฺฉูุงูุช
tailscale awg get          # ุชุฃุฏ ูพุดุชุจุงู ุงุฒ Amnezia-WG
```

### ูุดฺฉูุงุช ุงุชุตุงู

```bash
# ุจุงุฒูุดุงู ุจู WireGuard ุงุณุชุงูุฏุงุฑุฏ
tailscale awg reset

# ุงุจุชุฏุง ุชูุธูุงุช ูพุงู ุฑุง ุงูุชุญุงู ฺฉูุฏ
tailscale awg set \'{\"jc\":2,\"jmin\":64,\"jmax\":128}\'

# ุจุฑุฑุณ ูุงฺฏโูุง (ูููฺฉุณ)
sudo journalctl -u tailscaled -f
```

### ูุดฺฉูุงุช PowerShell ุฏุฑ ููุฏูุฒ

ุงุฒ ุญุงูุช ุชุนุงูู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุดฺฉูุงุช ูุฑุจูุท ุจู escape ฺฉุฑุฏู JSON ุงุณุชูุงุฏู ฺฉูุฏ:

```powershell
tailscale awg set  # ุฑุงูโุงูุฏุงุฒ ุชุนุงูู
```

## ๐ค ูพููุฏูุง ู ูพุดุชุจุงู

- ูุณุฎูโูุง: [LiuTangLei/tailscale](https://github.com/LiuTangLei/tailscale/releases)
- ูุงู APK ุงูุฏุฑูุฏ: [tailscale-android](https://github.com/LiuTangLei/tailscale-android/releases)
- ูุดฺฉูุงุช ูุตุจโฺฉููุฏู: [ุฑุฏุงุจ ูุดฺฉูุงุช](https://github.com/LiuTangLei/tailscale-awg-installer/issues)
- ูุณุชูุฏุงุช Amnezia-WG: [ูุณุชูุฏุงุช ุฑุณู](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## ๐ ูุฌูุฒ

ูุฌูุฒ BSD 3-Clause (ูุงููุฏ ูุณุฎู ุงุตู Tailscale)

---

**ุณูุจ ูุณุฆููุช**: ููุท ุจุฑุง ุงุณุชูุงุฏู ุขููุฒุด ู ุญูุธ ุญุฑู ุฎุตูุต ูุงููู. ูุณุฆููุช ุฑุนุงุช ููุงูู ุจุฑ ุนูุฏู ุดูุงุณุช.
