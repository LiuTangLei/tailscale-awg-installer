# Tailscale ุจุง Amnezia-WG 1.5

Tailscale ุจุง ูพุดุชุจุงู ุงุฒ **Amnezia-WG 1.5** โ ูพุฑูุชฺฉู ูุฎูโุณุงุฒ ุจุฑุง ุนุจูุฑ ุงุฒ DPI ู ููุชุฑูฺฏ.

**๐ ุฒุจุงูโูุง:** [English](../README.md) | [ไธญๆ](README-zh.md) | [ูุงุฑุณ](README-fa.md) | [ะัััะบะธะน](README-ru.md)

## ๐ ูุตุจ

**ูููฺฉุณ:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash
```

**ูฺฉโุงูุงุณ:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash
```

**ููุฏูุฒ (PowerShell ุจู ุนููุงู ูุฏุฑ):**

```powershell
iwr -useb https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1 | iex
```

### ุฏุงูููุฏ ุงุฒ ูุฑูุฑ (ุจุฑุง ููุงุทู ุจุง ูุญุฏูุฏุช)

ุชูุตู ูโุดูุฏ ุงุฒ ุฏุงููู ูุฑูุฑ ุงุฎุชุตุงุต ุฎูุฏุชุงู (ูุซูุงู <https://your-mirror-site.com>) ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ุงุฒ ูุณุฏูุฏ ุดุฏู ูุฑูุฑูุง ุนููู ุฌููฺฏุฑ ุดูุฏ. ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุณุฑุน ูโุชูุงูุฏ ุงุฒ [gh-proxy](https://github.com/hunshcn/gh-proxy) ุงุณุชูุงุฏู ฺฉูุฏ.

```bash
# ูููฺฉุณ:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash -s -- --mirror https://your-mirror-site.com
```

```bash
# ูฺฉโุงูุงุณ:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash -s -- --mirror https://your-mirror-site.com
```

```powershell
# ููุฏูุฒ:
$scriptContent = (iwr -useb https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1).Content;$scriptBlock = [scriptblock]::Create($scriptContent); & $scriptBlock -MirrorPrefix 'https://your-mirror-site.com/'
```

**ูุดฺฉู ุงุฌุฑุง ุงุณฺฉุฑูพุช ุฏุฑ PowerShell:**

```powershell
# ุงฺฏุฑ ุงุฌุฑุง ุงุณฺฉุฑูพุช ูุณุฏูุฏ ุงุณุช:
Set-ExecutionPolicy RemoteSigned
# ุง
Set-ExecutionPolicy Bypass -Scope Process
```

## โก ุดุฑูุน ุณุฑุน

1. ุทุจู ุฑุงูููุง ุจุงูุง ูุตุจ ฺฉูุฏ
2. ูุงุฑุฏ Tailscale ุดูุฏ:

```bash
# ฺฉูุชุฑู ูพูู ุฑุณู
tailscale up

# ุจุฑุง Headscale
tailscale up --login-server https://your-headscale-domain
```

3. ุฏุฑ ุตูุฑุช ูุงุฒ ูุฎูโุณุงุฒ ุฑุง ูุนุงู ฺฉูุฏ:

```bash
# ุฏูุฑ ุฒุฏู ูพุงู DPI (ุณุงุฒฺฏุงุฑ ุจุง ููู ููุฏูุง)
tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'

# ูุดุงูุฏู ุชูุธูุงุช ูุนู
tailscale amnezia-wg get

# ุชูุธู ุชุนุงูู
tailscale amnezia-wg set

# ุจุงุฒฺฏุดุช ุจู WireGuard ุงุณุชุงูุฏุงุฑุฏ
tailscale amnezia-wg reset
```

## ๐ก๏ธ ูุงุจูุชโูุง Amnezia-WG

### ุชุฑุงูฺฉ ุฌุนู ู ุงูุถุงูุง

ุงูฺฉุงู ุงูุฒูุฏู ูพฺฉุชโูุง ุฌุนู ู ุงูุถุงูุง ูพุฑูุชฺฉู ุจุฑุง ุนุจูุฑ ุงุฒ DPI โ ุณุงุฒฺฏุงุฑ ุจุง ููุฏูุง ุงุณุชุงูุฏุงุฑุฏ Tailscale:

```bash
# ุชุฑุงูฺฉ ุฌุนู ูพุงู
tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'

# ุจุง ุงูุถุงูุง ูพุฑูุชฺฉู (i1-i5)
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>","i2":"<b 0x40><r 12>"}'
```

### ูุฎูโุณุงุฒ ูพุฑูุชฺฉู

ุจุฑุง ูุฎูโุณุงุฒุ ููู ููุฏูุง ุจุงุฏ ุงู ููุฑฺฉ ุฑุง ุจุง ุชูุธูุงุช ฺฉุณุงู ุงุฌุฑุง ฺฉููุฏ (ุงูุถุงูุง ix ูโุชูุงูุฏ ูุชูุงูุช ุจุงุดุฏ):

```bash
# ูุฎูโุณุงุฒ ุฏุณุชโุฏู (s1/s2 ุจุงุฏ ฺฉุณุงู ุจุงุดุฏ)
tailscale amnezia-wg set '{"s1":10,"s2":15}'

# ููุฏูุง header (h1-h4 ุจุงุฏ ฺฉุณุงู ุจุงุดุฏ)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'

# ุชุฑฺฉุจ ุจุง ุงูุถุงูุง (i1-i5 ูโุชูุงูุฏ ูุชูุงูุช ุจุงุดุฏ)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777,"i1":"<b 0xc0><r 32><c><t>"}'
```

## ๐ฏ ุฑุงูููุง ูพฺฉุฑุจูุฏ

**ูพฺฉุฑุจูุฏโูุง ูพุงู (ุณุงุฒฺฏุงุฑ ุจุง ฺฉูุงูุชโูุง ุงุณุชุงูุฏุงุฑุฏ):**

| ููุน       | ูพฺฉุฑุจูุฏ                                              | ูุถุนุช        |
| --------- | ----------------------------------------------------- | ------------ |
| ููุท ุฌุนู  | `{"jc":4,"jmin":64,"jmax":256}`                       | โ ุงุณุชุงูุฏุงุฑุฏ |
| ุฌุนู+ุงูุถุง | `{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>"}` | โ ุงุณุชุงูุฏุงุฑุฏ |

**ูพฺฉุฑุจูุฏโูุง ูพุดุฑูุชู (ููู ููุฏูุง ุจุงุฏ ููุฑฺฉ ุจุงุดูุฏ):**

| ูุฏู     | ูุซุงู                                                                                             | ุชูุถุญ            |
| ------- | ------------------------------------------------------------------------------------------------ | ---------------- |
| ุฏุณุชโุฏู | `{"s1":10,"s2":15}`                                                                              | s1/s2: ฐโถด      |
| ูุฏุฑ     | `{"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234}`                              | h1โh4: ณฒุจุช    |
| ุชุฑฺฉุจ  | `{"jc":2,"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234,"i1":"<b 0xc0><r 16>"}` | jc/i1-i5 ุงุฎุชุงุฑ |

> โ๏ธ ูพฺฉุชโูุง ุฌุนู (jc) ู ุฒูุฌุฑูโูุง ุงูุถุง ุทููุงู (i1โi5) ูโุชูุงูุฏ ุจุงุนุซ ุงูุฒุงุด ุชุฃุฎุฑ ู ูุตุฑู ูพููุง ุจุงูุฏ ุดูุฏ. ุจุง ุงุญุชุงุท ุงุณุชูุงุฏู ฺฉูุฏ.

### ุชูุถุญ ูพุงุฑุงูุชุฑูุง

- **jc**: ุชุนุฏุงุฏ ูพฺฉุชโูุง ุฌุนู (ฐโฑฐุ ูุงุฒููุฏ jmin/jmax)
- **jmin/jmax**: ุงูุฏุงุฒู ูพฺฉุช ุฌุนู (ถดโฑฐฒด ุจุงุชุ ููุท ุจุง jc)
- **i1-i5**: ุงูุถุง ูพุฑูุชฺฉู (hex-string)
- **s1/s2**: ูพุดููุฏ ุฏุณุชโุฏู (ฐโถด ุจุงุชุ ููู ููุฏูุง ฺฉุณุงู)
- **h1-h4**: ูุฏุฑูุง ูุฎูโุณุงุฒ (ด ููุฏุงุฑ ณฒุจุชุ ููู ููุฏูุง ฺฉุณุงูุ ุชุฑุฌุญุงู ูุชูุงูุชุ ุจุงุฒู ตโฒฑดทดธณถดท)

### ุจุงุฒูโูุง ุฑุณู

| ูพุงุฑุงูุชุฑ    | ุจุงุฒู         | ุชูุถุญ                  |
| ---------- | ------------ | ---------------------- |
| I1-I5      | hex-string   | ุงูุถุง ุจุฑุง ุชููุฏ ูพุฑูุชฺฉู |
| S1, S2     | ฐโถด ุจุงุช    | ูพุดููุฏ ุฏุณุชโุฏู         |
| Jc         | ฐโฑฐ         | ุชุนุฏุงุฏ ูพฺฉุช ุฌุนู         |
| Jmin, Jmax | ถดโฑฐฒด ุจุงุช | ุงูุฏุงุฒู ูพฺฉุช ุฌุนู        |
| H1-H4      | ฐโดฒนดนถทฒนต | ููุงุฏุฑ ณฒุจุช ุจุฑุง ูุฏุฑ |

## ๐ ูพุดุชุจุงู ูพูุชูุฑูโูุง

| ูพูุชูุฑู  | ูุนูุงุฑโูุง            | ูุถุนุช                   |
| ------- | -------------------- | ----------------------- |
| ูููฺฉุณ  | x86_64, ARM64        | โ ูพุดุชุจุงู ฺฉุงูู        |
| ูฺฉโุงูุงุณ | Intel, Apple Silicon | โ ูพุดุชุจุงู ฺฉุงูู        |
| ููุฏูุฒ  | x86_64, ARM64        | โ ูุตุจโฺฉููุฏู PowerShell |

## ๐ ููุงุฌุฑุช ุงุฒ Tailscale ุฑุณู

1. ูุตุจโฺฉููุฏู ุฑุง ุงุฌุฑุง ฺฉูุฏ โ ูุงูโูุง ุงุฌุฑุง ุฌุงฺฏุฒู ูโุดููุฏ ุงูุง ุชูุธูุงุช ุดูุง ุญูุธ ูโุดูุฏ
2. ุงุญุฑุงุฒ ููุช ู ูพฺฉุฑุจูุฏ ุดูุง ุจุฏูู ุชุบุฑ ุจุงู ูโูุงูุฏ
3. ุจุฑุง ุดุฑูุนุ ูุฎูโุณุงุฒ ูพุงู ุฑุง ูุนุงู ฺฉูุฏ: `tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'`

## โ๏ธ ูฺฉุงุช ููู

- ุฑูุชุงุฑ ูพุดโูุฑุถ: ุชุง ุฒูุงู ฺฉู ูุฎูโุณุงุฒ ูุนุงู ูุดูุฏุ ูุซู ูุณุฎู ุฑุณู ุนูู ูโฺฉูุฏ
- ูพฺฉุชโูุง ุฌุนู (jc) ู ุงูุถุงูุง (i1-i5): ุจุง ูุฑ ููุฏ Tailscale ุณุงุฒฺฏุงุฑ ุงุณุชุ ูุฑ ููุฏ ูโุชูุงูุฏ ููุงุฏุฑ ูุชูุงูุช ุฏุงุดุชู ุจุงุดุฏ
- ูุฎูโุณุงุฒ (s1/s2) ู ูุฏุฑูุง (h1-h4): ููู ููุฏูุง ุจุงุฏ ููุงุฏุฑ ฺฉุณุงู ุฏุงุดุชู ุจุงุดูุฏ
- ุชูุธูุงุช ูพุงู ุชุฃุซุฑ ฺฉู ุจุฑ ุนููฺฉุฑุฏ ุฏุงุฑุฏ

## ๐๏ธ ุงุณุชูุงุฏู ูพุดุฑูุชู

### ูพฺฉุฑุจูุฏ ูุฏุฑูุง (h1-h4)

ูุฎูโุณุงุฒ ูพุฑูุชฺฉู ุจุฑุง ุนุจูุฑ ุงุฒ ุชุดุฎุต WireGuard. ุจุงุฏ ูุฑ ด ููุฏุงุฑ ุฑุง ุชูุธู ฺฉูุฏ ุง ูฺโฺฉุฏุงู:

```bash
# ููุฏ ุงูู: ููุงุฏุฑ ุชุตุงุฏู ุจุณุงุฒุฏ (ุจุฑุง ูุฑ h1-h4 ุจููุณุฏ random)
tailscale amnezia-wg set  # h1, h2, h3, h4 ุฑุง ููฺฏุงู ุฏุฑุฎูุงุณุช ูุงุฑุฏ ฺฉูุฏ

# ุฏุฑุงูุช JSON ูพฺฉุฑุจูุฏ
tailscale amnezia-wg get

# ฺฉูพ JSON ุจู ุณุงุฑ ููุฏูุง (ุจุงุฏ ููู h1-h4 ุจุงุดุฏ)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'
```

### ุณุงุฎุช ุงูุถุง ูพุฑูุชฺฉู

1. ุชุฑุงูฺฉ ูุงูุน ุฑุง ุจุง Wireshark ุถุจุท ฺฉูุฏ
2. ุงูฺฏููุง hex ุฑุง ุงุฒ ูุฏุฑูุง ุงุณุชุฎุฑุงุฌ ฺฉูุฏ
3. ูุฑูุช: `<b 0xHEX>` (ุซุงุจุช)ุ `<r LENGTH>` (ุชุตุงุฏู)ุ `<c>` (ุดูุงุฑูุฏู)ุ `<t>` (timestamp)
4. ูุซุงู: `<b 0xc0000000><r 16><c><t>` = ูุฏุฑ ุดุจู QUIC + ฑถ ุจุงุช ุชุตุงุฏู + ุดูุงุฑูุฏู + timestamp

### ูพฺฉุชโูุง I1โI5 (ุฒูุฌุฑู ุงูุถุง) ู CPS (ุงูุถุง ุณูุงุฑุด)

ูุจู ุงุฒ ูุฑ ุฏุณุชโุฏู "ูฺู" (ุชูุฑุจุงู ูุฑ ฑฒฐ ุซุงูู)ุ ฺฉูุงูุช ูโุชูุงูุฏ ุชุง ต ูพฺฉุช UDP ุณูุงุฑุด (I1โI5) ุฑุง ุฏุฑ ูุงูุจ CPS ุจุฑุง ุชููุฏ ูพุฑูุชฺฉู ุงุฑุณุงู ฺฉูุฏ.

**ูุงูุจ CPS:**

```text
i{n} = <tag1><tag2><tag3>...<tagN>
```

**ุงููุงุน ุชฺฏ:**

| ุชฺฏ  | ูุฑูุช           | ุชูุถุญุงุช                                 | ูุญุฏูุฏุช        |
| --- | -------------- | --------------------------------------- | -------------- |
| b   | `<b hex_data>` | ุจุงุช ุซุงุจุช ุจุฑุง ุชููุฏ ูพุฑูุชฺฉู             | ุทูู ุฏูุฎูุงู     |
| c   | `<c>`          | ุดูุงุฑูุฏู ูพฺฉุช (ณฒุจุชุ network order)      | ฺฉุชุง ุฏุฑ ุฒูุฌุฑู |
| t   | `<t>`          | timestamp ููฺฉุณ (ณฒุจุชุ network order) | ฺฉุชุง ุฏุฑ ุฒูุฌุฑู |
| r   | `<r length>`   | ุจุงุช ุชุตุงุฏู ุงูู ุฑูุฒูฺฏุงุฑ                | length โค 1000  |

**ูุซุงู:**

```text
i1 = <b 0xf6ab3267fa><c><b 0xf6ab><t><r 10>
```

> โ๏ธ ุงฺฏุฑ i1 ุชูุธู ูุดูุฏุ ฺฉู ุฒูุฌุฑู (I2โI5) ูุงุฏุฏู ฺฏุฑูุชู ูโุดูุฏ.

#### ุถุจุท ูพฺฉุชโูุง ูุงูุน ุจุง Wireshark

1. Amnezia-WG ุฑุง ุงุฌุฑุง ู i1โi5 ุฑุง ุชูุธู ฺฉูุฏ
2. ุจุง Wireshark ูพูุฑุช UDP ุฑุง ูุงูุชูุฑ ฺฉูุฏ (ูุซูุงู ููุชุฑ: `udp.port == 51820`)
3. ูพฺฉุชโูุง ุฑุง ุจุฑุฑุณ ู ุงูุถุงูุง ุฑุง ุงุณุชุฎุฑุงุฌ ฺฉูุฏ

ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑ: [ูุณุชูุฏุงุช ุฑุณู Amnezia-WG](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## ๐ ุนุจโุงุจ

### ุจุฑุฑุณ ูุตุจ

```bash
tailscale version          # ุจุฑุฑุณ ูุณุฎู ฺฉูุงูุช
tailscale amnezia-wg get   # ุจุฑุฑุณ ูพุดุชุจุงู Amnezia-WG
```

### ูุดฺฉูุงุช ุงุชุตุงู

```bash
# ุจุงุฒฺฏุดุช ุจู WireGuard ุงุณุชุงูุฏุงุฑุฏ
tailscale amnezia-wg reset

# ุงุจุชุฏุง ุชูุธูุงุช ูพุงู ุฑุง ุงูุชุญุงู ฺฉูุฏ
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128}'

# ูุดุงูุฏู ูุงฺฏโูุง (ูููฺฉุณ)
sudo journalctl -u tailscaled -f
```

### ูุดฺฉูุงุช PowerShell

ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุดฺฉู escape ฺฉุฑุฏู JSONุ ุงุฒ ุญุงูุช ุชุนุงูู ุงุณุชูุงุฏู ฺฉูุฏ:

```powershell
tailscale amnezia-wg set  # ุชูุธูุงุช ุชุนุงูู
```

## ๐ค ููฺฉ ู ูพุดุชุจุงู

- **ุงูุชุดุงุฑ ุจุงูุฑ**: [LiuTangLei/tailscale](https://github.com/LiuTangLei/tailscale/releases)
- **ฺฏุฒุงุฑุด ูุดฺฉู ูุตุจ**: [GitHub Issues](https://github.com/LiuTangLei/tailscale-awg-installer/issues)
- **ูุณุชูุฏุงุช Amnezia-WG**: [ูุณุชูุฏุงุช ุฑุณู](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## ๐ ูุฌูุฒ

ูุฌูุฒ BSD 3-Clause (ููุงููุฏ Tailscale)

---

**โ๏ธ ุณูุจ ูุณุฆููุช: ููุท ุจุฑุง ุงุณุชูุงุฏู ูุงููู ู ุขููุฒุด. ูุณุฆููุช ุฑุนุงุช ููุงูู ุจุง ฺฉุงุฑุจุฑ ุงุณุช.**

# Tailscale ุจุง Amnezia-WG 1.5

[![GitHub Release](https://img.shields.io/github/v/release/LiuTangLei/tailscale)](https://github.com/LiuTangLei/tailscale/releases/latest)
[![Platform Support](https://img.shields.io/badge/platform-Linux%20|%20macOS%20|%20Windows-blue)](https://github.com/LiuTangLei/tailscale/releases/latest)
[![License](https://img.shields.io/badge/license-BSD--3--Clause-green)](LICENSE)

Tailscale ุจุง ูพุฑูุชฺฉู **Amnezia-WG 1.5** ุจุฑุง ุชุญุฑู DPI ู ุฏูุฑ ุฒุฏู ุณุงูุณูุฑ.

## ๐ ูุตุจ

**Linux:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash
```

**macOS:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash
```

**Windows (PowerShell ุจู ุนููุงู Admin):**

```powershell
iwr -useb https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1 | iex
```

### ฺฏุฒููโูุง ูุตุจ

**ุฏุงูููุฏ ุงุฒ ุทุฑู Mirror (ุงฺฏุฑ GitHub ุฏุฑ ฺฉุดูุฑ ุดูุง ฺฉูุฏ ุง ูุณุฏูุฏ ุงุณุช):**

ุชูุตู ูโุดูุฏ ุงุฒ ุฏุงููู mirror ุฎูุฏุชุงู ุงุณุชูุงุฏู ฺฉูุฏ (ูุซู <https://your-mirror-site.com>) ุชุง ุงุฒ ูุณุฏูุฏ ุดุฏู mirror ูุง ุนููู ุฌููฺฏุฑ ฺฉูุฏ. ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ [gh-proxy](https://github.com/hunshcn/gh-proxy) mirror ุฎูุฏุชุงู ุฑุง ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ.

```bash
# Linux:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash -s -- --mirror https://your-mirror-site.com
```

```bash
# macOS:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash -s -- --mirror https://your-mirror-site.com
```

```powershell
# Windows:
$scriptContent = (iwr -useb https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1).Content;$scriptBlock = [scriptblock]::Create($scriptContent); & $scriptBlock -MirrorPrefix 'https://your-mirror-site.com/'
```

**ูุดฺฉูุงุช execution policy ุฏุฑ PowerShell:**

```powershell
# ุงฺฏุฑ ุงุฌุฑุง script ูุณุฏูุฏ ุดุฏู:
Set-ExecutionPolicy RemoteSigned
# ุง
Set-ExecutionPolicy Bypass -Scope Process
```

## โก ุดุฑูุน ุณุฑุน

1. **ูุตุจ** ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑุงุช ุจุงูุง
2. **ูุงุฑุฏ ุดุฏู** ุจู Tailscale:

```bash
# ุตูุญู ฺฉูุชุฑู ุฑุณู
tailscale up

# ฺฉุงุฑุจุฑุงู Headscale
tailscale up --login-server https://your-headscale-domain
```

3. **ูุนุงู ฺฉุฑุฏู obfuscation** ุฏุฑ ุตูุฑุช ูุงุฒ:

```bash
# ุฏูุฑ ุฒุฏู ูพุงู DPI (ุณุงุฒฺฏุงุฑ ุจุง ูุฑ peer)
tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'

# ุจุฑุฑุณ ุชูุธูุงุช ูุนู
tailscale amnezia-wg get

# ุชูุธูุงุช ุชุนุงูู
tailscale amnezia-wg set

# ุจุงุฒฺฏุดุช ุจู WireGuard ุงุณุชุงูุฏุงุฑุฏ
tailscale amnezia-wg reset
```

## ๐ก๏ธ ูฺฺฏโูุง Amnezia-WG

### ุชุฑุงูฺฉ ุขุดุบุงู ู ุงูุถุงูุง

ุงุถุงูู ฺฉุฑุฏู ูพฺฉุชโูุง ุฌุนู ู ุงูุถุงูุง ูพุฑูุชฺฉู ุจุฑุง ุฏูุฑ ุฒุฏู DPI. ุณุงุฒฺฏุงุฑ ุจุง peer ูุง ุงุณุชุงูุฏุงุฑุฏ Tailscale:

```bash
# ุชุฑุงูฺฉ ุขุดุบุงู ูพุงู
tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'

# ุจุง ุงูุถุงูุง ูพุฑูุชฺฉู (i1-i5)
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>","i2":"<b 0x40><r 12>"}'
```

### ุชุญุฑู ูพุฑูุชฺฉู

ูุงุฒ ุจู ุงุณุชูุงุฏู ุชูุงู node ูุง ุงุฒ ุงู fork ุจุง ุชูุธูุงุช ฺฉุณุงู (ุงูุถุงูุง ix ูุงุฒ ุจู ุชุทุจู ูุฏุงุฑูุฏ):

```bash
# obfuscation ุฏุณุชโุฏุงุฏู (s1/s2 ุจุงุฏ ุฏุฑ ุชูุงู node ูุง ูุทุงุจูุช ุฏุงุดุชู ุจุงุดูุฏ)
tailscale amnezia-wg set '{"s1":10,"s2":15}'

# ุจุง ููุฏูุง header (h1-h4 ุจุฑุง obfuscation ูพุฑูุชฺฉูุ ุจุงุฏ ุฏุฑ ุชูุงู node ูุง ูุทุงุจูุช ุฏุงุดุชู ุจุงุดูุฏ)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'

# ุชุฑฺฉุจ ุจุง ุงูุถุงูุง (i1-i5 ูโุชูุงูุฏ ุฏุฑ ูุฑ node ูุชูุงูุช ุจุงุดุฏ)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777,"i1":"<b 0xc0><r 32><c><t>"}'
```

## ๐ฏ ุฑุงูููุง ูพฺฉุฑุจูุฏ

**ูพฺฉุฑุจูุฏโูุง ูพุงู (ุณุงุฒฺฏุงุฑ ุจุง ฺฉูุงูุชโูุง ุงุณุชุงูุฏุงุฑุฏ):**

| ููุน            | ูพฺฉุฑุจูุฏ                                              | ูุถุนุช     |
| -------------- | ----------------------------------------------------- | --------- |
| **ููุท ุขุดุบุงู**  | `{"jc":4,"jmin":64,"jmax":256}`                       | โ ุณุงุฒฺฏุงุฑ |
| **ุขุดุบุงู+ุงูุถุง** | `{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>"}` | โ ุณุงุฒฺฏุงุฑ |

**ูพฺฉุฑุจูุฏโูุง ูพุดุฑูุชู (ูุงุฒ ุจู ุงุณุชูุงุฏู ุงู fork ุฏุฑ ุชูุงู ฺฏุฑูโูุง):**

| ููุน             | ูพฺฉุฑุจูุฏ                                                                                         | ูุถุนุช           |
| --------------- | ------------------------------------------------------------------------------------------------ | --------------- |
| **obfuscation** | `{"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234}`                              | โ ูุงุฒ ุจู fork |
| **ฺฉุงูู**        | `{"jc":2,"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234,"i1":"<b 0xc0><r 16>"}` | โ ูุงุฒ ุจู fork |

> **ุณุทุญ ูุฎูโฺฉุงุฑ**: ุงุณุชูุงุฏู ุงุฒ ุงููุงุน ูพุงุฑุงูุชุฑูุง ุจุดุชุฑ (jc/i1-i5/s1-s2/h1-h4) obfuscation ุจูุชุฑ ุงุฑุงุฆู ูโุฏูุฏุ ุงูุง ุงุฒ ูพฺฉุชโูุง ุขุดุบุงู (jc) ู ุงูุถุงูุง (i1-i5) ุฒุงุฏ ุฌููฺฏุฑ ฺฉูุฏ ุชุง ุงุฒ ุงุชูุงู ูพููุง ุจุงูุฏ ู ูุดฺฉูุงุช ุชุฃุฎุฑ ูพุดฺฏุฑ ุดูุฏ.

### ุชูุถุญ ูพุงุฑุงูุชุฑูุง

- **jc**: ุชุนุฏุงุฏ ูพฺฉุชโูุง ุขุดุบุงู (0-10ุ ุจุงุฏ jmin/jmax ุฑุง ุจุง ูู ุชูุธู ฺฉุฑุฏ)
- **jmin/jmax**: ูุญุฏูุฏู ุงูุฏุงุฒู ูพฺฉุช ุขุดุบุงู ุจุฑ ุญุณุจ ุจุงุช (64-1024ุ ููฺฏุงู ุงุณุชูุงุฏู ุงุฒ jc ูุงุฒู ุงุณุช)
- **i1-i5**: ูพฺฉุชโูุง ุงูุถุง ูพุฑูุชฺฉู ุจุฑุง ุชููุฏ (hex-blob ุฏูุฎูุงู)
- **s1/s2**: ูพุดููุฏูุง ุชุตุงุฏู ุจุฑุง ูพฺฉุชโูุง Init/Response (0-64 ุจุงุชุ ูุงุฒ ุจู ุชุทุจู ููุงุฏุฑ ุฏุฑ ุชูุงู node ูุง)
- **h1-h4**: obfuscation ูพุฑูุชฺฉู (ููุงุฏุฑ 32 ุจุชุ ุจุงุฏ ุชูุงู 4 ุชุง ุฑุง ุชูุธู ฺฉุฑุฏ ุง ูฺโฺฉุฏุงูุ ูุงุฒ ุจู ุชุทุจู ููุงุฏุฑ ุฏุฑ ุชูุงู node ูุง)

### ูุญุฏูุฏู ูพุงุฑุงูุชุฑูุง ุฑุณู

| ูพุงุฑุงูุชุฑ        | ูุญุฏูุฏู          | ุชูุถุญุงุช                                     |
| -------------- | --------------- | ------------------------------------------- |
| **I1-I5**      | hex-blob ุฏูุฎูุงู | ูพฺฉุชโูุง ุงูุถุง ุจุฑุง ุชููุฏ ูพุฑูุชฺฉู              |
| **S1, S2**     | 0-64 ุจุงุช       | ูพุดููุฏูุง ุชุตุงุฏู ุจุฑุง ูพฺฉุชโูุง Init/Response |
| **Jc**         | 0-10            | ุชุนุฏุงุฏ ูพฺฉุชโูุง ุขุดุบุงู ุฏูุจุงู I1-I5             |
| **Jmin, Jmax** | 64-1024 ุจุงุช    | ูุญุฏูุฏู ุงูุฏุงุฒู ูพฺฉุชโูุง ุขุดุบุงู ุชุตุงุฏู          |
| **H1-H4**      | 0-4294967295    | ููุงุฏุฑ 32 ุจุช ุจุฑุง obfuscation ูพุฑูุชฺฉู      |

## ๐ ูพุดุชุจุงู ุงุฒ ูพูุชูุฑูโูุง

| ูพูุชูุฑู      | ูุนูุงุฑโูุง            | ูุถุนุช                     |
| ----------- | -------------------- | ------------------------- |
| **Linux**   | x86_64, ARM64        | โ ฺฉุงููุงู ูพุดุชุจุงู ูโุดูุฏ |
| **macOS**   | Intel, Apple Silicon | โ ฺฉุงููุงู ูพุดุชุจุงู ูโุดูุฏ |
| **Windows** | x86_64, ARM64        | โ ูุตุจโฺฉููุฏู PowerShell   |

## ๐ ููุงุฌุฑุช ุงุฒ Tailscale ุฑุณู

1. ูุตุจโฺฉููุฏู ุฑุง ุงุฌุฑุง ฺฉูุฏ - ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูุงูโูุง ุจุงูุฑ ุฑุง ุฌุงฺฏุฒู ูโฺฉูุฏ ุฏุฑ ุญุงู ฺฉู ุชูุธูุงุช ุดูุง ุฑุง ุญูุธ ูโฺฉูุฏ
2. ุงุญุฑุงุฒ ููุช ู ูพฺฉุฑุจูุฏ ููุฌูุฏ ุดูุง ุจุฏูู ุชุบุฑ ุจุงู ูโูุงูุฏ
3. ุจุง obfuscation ูพุงู ุดุฑูุน ฺฉูุฏ: `tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'`

## โ๏ธ ูฺฉุงุช ููู

- **ุฑูุชุงุฑ ูพุดโูุฑุถ**: ุฏููุงู ูุซู Tailscale ุฑุณู ฺฉุงุฑ ูโฺฉูุฏ ุชุง ุฒูุงู ฺฉู obfuscation ุฑุง ูุนุงู ฺฉูุฏ
- **ูพฺฉุชโูุง ุขุดุบุงู (jc) ู ุงูุถุงูุง (i1-i5)**: ุจุง ูุฑ peer Tailscale ุณุงุฒฺฏุงุฑ ุงุณุชุ ุดุงูู ฺฉูุงูุชโูุง ุงุณุชุงูุฏุงุฑุฏ. ูุฑ node ูโุชูุงูุฏ ุงุฒ ููุงุฏุฑ ูุชูุงูุช ุงุณุชูุงุฏู ฺฉูุฏ
- **ุชุญุฑู ูพุฑูุชฺฉู (s1/s2) ู ููุฏูุง header (h1-h4)**: ูุงุฒ ุจู ุงุณุชูุงุฏู ุชูุงู node ูุง ุงุฒ ุงู fork ุจุง ููุงุฏุฑ ฺฉุณุงู
- **ุนููฺฉุฑุฏ**: overhead ุญุฏุงูู ุจุง ุชูุธูุงุช ูพุงู

## ๐๏ธ ุงุณุชูุงุฏู ูพุดุฑูุชู

### ูพฺฉุฑุจูุฏ ููุฏูุง Header (h1-h4)

obfuscation ูพุฑูุชฺฉู ุจุฑุง ุฏูุฑ ุฒุฏู ุชุดุฎุต WireGuard. ุจุงุฏ ุชูุงู 4 ููุฏุงุฑ ุฑุง ุชูุธู ฺฉุฑุฏ ุง ูฺโฺฉุฏุงู:

```bash
# node ุงูู: ุชููุฏ ููุงุฏุฑ ุชุตุงุฏู (ุจุฑุง ูุฑ h1-h4 'random' ูุงุฑุฏ ฺฉูุฏ)
tailscale amnezia-wg set  # ุชูุงู h1, h2, h3, h4 ุฑุง ููฺฏุงู ุฏุฑุฎูุงุณุช ุชูุธู ฺฉูุฏ

# JSON ูพฺฉุฑุจูุฏ ุฑุง ุฏุฑุงูุช ฺฉูุฏ
tailscale amnezia-wg get

# ฺฉู JSON ุฑุง ุจู node ูุง ุฏฺฏุฑ ฺฉูพ ฺฉูุฏ (ุจุงุฏ ุดุงูู ุชูุงู h1-h4 ุจุงุดุฏ)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'
```

### ุงุฌุงุฏ ุงูุถุงูุง ูพุฑูุชฺฉู

1. ุชุฑุงูฺฉ ูุงูุน ุฑุง ุจุง Wireshark ุถุจุท ฺฉูุฏ
2. ุงูฺฏููุง hex ุฑุง ุงุฒ header ูุง ุงุณุชุฎุฑุงุฌ ฺฉูุฏ
3. ูุฑูุช ุณุงุฎุช: `<b 0xHEX>` (ุซุงุจุช), `<r LENGTH>` (ุชุตุงุฏู), `<c>` (ุดูุงุฑูุฏู), `<t>` (timestamp)
4. ูุซุงู: `<b 0xc0000000><r 16><c><t>` = header ุดุจู QUIC + 16 ุจุงุช ุชุตุงุฏู + ุดูุงุฑูุฏู + timestamp

### ูพฺฉุชโูุง Obfuscation I1โI5 (ุฒูุฌุฑู ุงูุถุง) ู CPS (ุงูุถุง ูพุฑูุชฺฉู ุณูุงุฑุด)

ูุจู ุงุฒ ูุฑ ุฏุณุชโุฏุงุฏู "ุฎุงุต" (ูุฑ 120 ุซุงูู)ุ ฺฉูุงูุช ููฺฉู ุงุณุช ุชุง ูพูุฌ ูพฺฉุช UDP ุณูุงุฑุด (I1โI5) ุฑุง ุฏุฑ ูุฑูุช CPS ุจุฑุง ุชููุฏ ูพุฑูุชฺฉู ุงุฑุณุงู ฺฉูุฏ.

**ูุฑูุช CPS:**

```text
i{n} = <tag1><tag2><tag3>...<tagN>
```

**ุงููุงุน Tag:**

| Tag | ูุฑูุช           | ุชูุถุญุงุช                                    | ูุญุฏูุฏุชโูุง             |
| --- | -------------- | ------------------------------------------ | ---------------------- |
| b   | `<b hex_data>` | ุจุงุชโูุง ุซุงุจุช ุจุฑุง ุชููุฏ ูพุฑูุชฺฉูโูุง         | ุทูู ุฏูุฎูุงู             |
| c   | `<c>`          | ุดูุงุฑูุฏู ูพฺฉุช (32-bitุ ุชุฑุชุจ ุจุงุช ุดุจฺฉู)      | ููุญุตุฑ ุจู ูุฑุฏ ุฏุฑ ุฒูุฌุฑู |
| t   | `<t>`          | timestamp ููฺฉุณ (32-bitุ ุชุฑุชุจ ุจุงุช ุดุจฺฉู) | ููุญุตุฑ ุจู ูุฑุฏ ุฏุฑ ุฒูุฌุฑู |
| r   | `<r length>`   | ุจุงุชโูุง ุชุตุงุฏู ุงูู ุฑูุฒูฺฏุงุฑ               | length โค 1000          |

**ูุซุงู:**

```text
i1 = <b 0xf6ab3267fa><c><b 0xf6ab><t><r 10>
```

> โ๏ธ ุงฺฏุฑ i1 ุชูุธู ูุดุฏู ุจุงุดุฏุ ฺฉู ุฒูุฌุฑู (I2โI5) ูุงุฏุฏู ฺฏุฑูุชู ูโุดูุฏ.

#### ุถุจุท ูพฺฉุชโูุง Obfuscation ูุงูุน ุจุง Wireshark

1. Amnezia-WG ุฑุง ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ ู ูพุงุฑุงูุชุฑูุง i1โi5 ุฑุง ูพฺฉุฑุจูุฏ ฺฉูุฏ
2. ุงุฒ Wireshark ุจุฑุง ูุธุงุฑุช ุจุฑ ูพูุฑุช UDP ุงุณุชูุงุฏู ฺฉูุฏ (ูุซูุงู ููุชุฑ: `udp.port == 51820`)
3. ูพฺฉุชโูุง obfuscation ุฑุง ูุดุงูุฏู ู ุชุฌุฒู ู ุชุญูู ฺฉูุฏุ ุงูุถุงูุง ูพุฑูุชฺฉู ุฑุง ุฏุฑ ุตูุฑุช ูุงุฒ ุงุณุชุฎุฑุงุฌ ฺฉูุฏ

ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑุ [ูุณุชูุฏุงุช ุฑุณู Amnezia-WG](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted) ุฑุง ุจุจูุฏ

## ๐ ุนุจโุงุจ

### ุชุฃุฏ ูุตุจ

```bash
tailscale version          # ุจุฑุฑุณ ูุณุฎู ฺฉูุงูุช
tailscale amnezia-wg get   # ุชุฃุฏ ูพุดุชุจุงู Amnezia-WG
```

### ูุดฺฉูุงุช ุงุชุตุงู

```bash
# ุจุงุฒฺฏุดุช ุจู WireGuard ุงุณุชุงูุฏุงุฑุฏ
tailscale amnezia-wg reset

# ุงุจุชุฏุง ุชูุธูุงุช ูพุงู ุฑุง ุงูุชุญุงู ฺฉูุฏ
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128}'

# ุจุฑุฑุณ log ูุง (Linux)
sudo journalctl -u tailscaled -f
```

### ูุดฺฉูุงุช Windows PowerShell

ุงุฒ ุญุงูุช ุชุนุงูู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุดฺฉูุงุช escape ฺฉุฑุฏู JSON ุงุณุชูุงุฏู ฺฉูุฏ:

```powershell
tailscale amnezia-wg set  # ุชูุธูุงุช ุชุนุงูู
```

## ๐ค ููฺฉโูุง ู ูพุดุชุจุงู

- **ุงูุชุดุงุฑุงุช ุจุงูุฑ**: [LiuTangLei/tailscale](https://github.com/LiuTangLei/tailscale/releases)
- **ูุดฺฉูุงุช ูุตุจโฺฉููุฏู**: [GitHub Issues](https://github.com/LiuTangLei/tailscale-awg-installer/issues)
- **ูุณุชูุฏุงุช Amnezia-WG**: [ูุณุชูุฏุงุช ุฑุณู](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## ๐ ูุฌูุฒ

ูุฌูุฒ BSD 3-Clause (ูุดุงุจู Tailscale)

---

**โ๏ธ ุณูุจ ูุณุฆููุช**: ููุท ุจุฑุง ุงูุฏุงู ุขููุฒุด ู ุญุฑู ุฎุตูุต ูุดุฑูุน. ฺฉุงุฑุจุฑุงู ูุณุฆูู ุฑุนุงุช ููุงูู ูุงุจู ุงุฌุฑุง ูุณุชูุฏ.
