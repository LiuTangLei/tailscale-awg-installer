# Tailscale —Å Amnezia-WG 1.5

[![GitHub Release](https://img.shields.io/github/v/release/LiuTangLei/tailscale)](https://github.com/LiuTangLei/tailscale/releases/latest)
[![–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã](https://img.shields.io/badge/platform-Linux%20|%20macOS%20|%20Windows%20|%20Android-blue)](https://github.com/LiuTangLei/tailscale/releases/latest)
[![–õ–∏—Ü–µ–Ω–∑–∏—è](https://img.shields.io/badge/license-BSD--3--Clause-green)](LICENSE)

–£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç Tailscale —Å –æ–±—Ñ—É—Å–∫–∞—Ü–∏–µ–π **Amnezia-WG 1.5**: –º—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫, —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è/–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –¥–ª—è –ø—Ä–æ—Ç–∏–≤–æ–¥–µ–π—Å—Ç–≤–∏—è DPI –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º. –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π Tailscale, –ø–æ–∫–∞ –≤—ã –Ω–µ –≤–∫–ª—é—á–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ AWG.

**üìö –Ø–∑—ã–∫–∏:** [English](README.md) | [‰∏≠Êñá](doc/README-zh.md) | [ŸÅÿßÿ±ÿ≥€å](doc/README-fa.md) | [–†—É—Å—Å–∫–∏–π](doc/README-ru.md)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞                                    | –ö–æ–º–∞–Ω–¥–∞ / –î–µ–π—Å—Ç–≤–∏–µ                                                                                       |
| -------------------------------------------- | -------------------------------------------------------------------------------------------------------- | ----- |
| Linux                                        | `curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh   | bash` |
| macOS\*                                      | `curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh   | bash` |
| Windows (PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞) | `iwr -useb https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1 | iex`  |
| Android                                      | –°–∫–∞—á–∞—Ç—å APK: [—Ä–µ–ª–∏–∑—ã](https://github.com/LiuTangLei/tailscale-android/releases)                          |

**\*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ macOS:** –ò–∑-–∑–∞ —Å—Ä–µ–¥—Å—Ç–≤ –∑–∞—â–∏—Ç—ã —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ CLI Tailscale. –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Tailscale.app, –≤–∞–º –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

–°–±–æ—Ä–∫–∞ –¥–ª—è Android –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ AWG (–ø–æ–ª—É—á–µ–Ω–∏–µ) —Å –¥—Ä—É–≥–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —É–∑–ª–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å¬ª –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

![–ü—Ä–∏–º–µ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ AWG –Ω–∞ Android](doc/sync1.jpg)

### –ó–µ—Ä–∫–∞–ª–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–µ—Ä–∫–∞–ª–æ –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://your-mirror-site.com`) —Å –ø–æ–º–æ—â—å—é [gh-proxy](https://github.com/hunshcn/gh-proxy), –µ—Å–ª–∏ GitHub —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω:

```bash
# Linux
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash -s -- --mirror https://your-mirror-site.com

# macOS
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash -s -- --mirror https://your-mirror-site.com
```

```powershell
# Windows
$scriptContent = (iwr -useb https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1).Content; $scriptBlock = [scriptblock]::Create($scriptContent); & $scriptBlock -MirrorPrefix \'https://your-mirror-site.com/\'
```

–ü–æ–ª–∏—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è PowerShell (–µ—Å–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ): `Set-ExecutionPolicy RemoteSigned` (–∏–ª–∏ `Bypass -Scope Process`)

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ macOS

- **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ CLI**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ `tailscaled` (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å utun) –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–±–æ—Ä–∫–∞–º–∏
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É–¥–∞–ª–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Tailscale.app –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

> –°–æ–≤–µ—Ç: `tailscale amnezia-wg` ‚Üí `tailscale awg` (–ø—Å–µ–≤–¥–æ–Ω–∏–º)

1.  –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É:

```bash
# –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π
tailscale up
# Headscale
tailscale up --login-server https://your-headscale-domain
```

2.  –ü–µ—Ä–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –æ–±—â–∏–µ –∫–ª—é—á–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è):

```bash
tailscale awg set
```

–í–≤–µ–¥–∏—Ç–µ `random` –¥–ª—è H1‚ÄìH4, —á—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ 32-–±–∏—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

3.  –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –¥—Ä—É–≥–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
    - –ö–æ–º–ø—å—é—Ç–µ—Ä: `tailscale awg sync`
    - Android: –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å¬ª (—Å–º. —Å–∫—Ä–∏–Ω—à–æ—Ç –≤—ã—à–µ)
4.  –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `tailscale awg set` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—â–∏–µ –ø–æ–ª—è (–æ—Å—Ç–∞–≤—å—Ç–µ S1/S2/H1‚ÄìH4 –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π).
5.  –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
tailscale awg get     # –ø–æ–∫–∞–∑–∞—Ç—å JSON
tailscale awg reset   # –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–±—ã—á–Ω–æ–º—É WireGuard
```

## üõ°Ô∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ú—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã

–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–¥–¥–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –¥–ª—è –æ–±—Ö–æ–¥–∞ DPI. –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —É–∑–ª–∞–º–∏ Tailscale:

```bash
# –ë–∞–∑–æ–≤—ã–π –º—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫
tailscale awg set '{"jc":4,"jmin":64,"jmax":256}'

# –° —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ (i1-i5)
tailscale awg set '{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>","i2":"<b 0x40><r 12>"}'
```

### –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

–¢—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã –í–°–ï —É–∑–ª—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —ç—Ç—É –≤–µ—Ä—Å–∏—é —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (—Å–∏–≥–Ω–∞—Ç—É—Ä—ã ix –ù–ï —Ç—Ä–µ–±—É—é—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è):

```bash
# –û–±—Ñ—É—Å–∫–∞—Ü–∏—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è (s1/s2 –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö)
tailscale awg set '{"s1":10,"s2":15}'

# –° –ø–æ–ª—è–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (h1-h4 –¥–ª—è –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö)
tailscale awg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'

# –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏ (i1-i5 –º–æ–≥—É—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ)
tailscale awg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777,"i1":"<b 0xc0><r 32><c><t>"}'
```

## üéØ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ë–∞–∑–æ–≤–∞—è (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏):

| –¢–∏–ø               | JSON                                                  | –°–æ–≤–º–µ—Å—Ç–∏–º–æ |
| ----------------- | ----------------------------------------------------- | ---------- |
| –¢–æ–ª—å–∫–æ –º—É—Å–æ—Ä      | `{"jc":4,"jmin":64,"jmax":256}`                       | ‚úÖ –î–∞      |
| –ú—É—Å–æ—Ä + –°–∏–≥–Ω–∞—Ç—É—Ä–∞ | `{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>"}` | ‚úÖ –î–∞      |

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è (–≤—Å–µ —É–∑–ª—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –≤–µ—Ä—Å–∏—é –∏ –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ S1/S2/H1‚ÄìH4):

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ           | –ü—Ä–∏–º–µ—Ä                                                                                           | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è                    |
| -------------------- | ------------------------------------------------------------------------------------------------ | ----------------------------- |
| –ü—Ä–µ—Ñ–∏–∫—Å—ã —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è | `{"s1":10,"s2":15}`                                                                              | s1/s2: 0‚Äì64 –±–∞–π—Ç              |
| –û–±—Ñ—É—Å–∫–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ | `{"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234}`                              | —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ h1‚Äìh4          |
| –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è      | `{"jc":2,"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234,"i1":"<b 0xc0><r 16>"}` | –º—É—Å–æ—Ä/—Å–∏–≥–Ω–∞—Ç—É—Ä—ã –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã |

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

- jc (0‚Äì10) —Å jmin/jmax (64‚Äì1024): –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω —Ä–∞–∑–º–µ—Ä–æ–≤ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
- i1‚Äìi5: –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä (–º–∏–Ω–∏-—è–∑—ã–∫ –≤ hex-—Ñ–æ—Ä–º–∞—Ç–µ)
- s1/s2 (0‚Äì64 –±–∞–π—Ç): –ø—Ä–µ—Ñ–∏–∫—Å—ã –¥–ª—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è (–¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö AWG)
- h1‚Äìh4 (32-–±–∏—Ç–Ω—ã–µ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞): –æ–±—Ñ—É—Å–∫–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–≤—Å–µ –∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ; –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å). –í—ã–±–µ—Ä–∏—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 5‚Äì2147483647)

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è: –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ –¥–ª–∏–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç –∑–∞–¥–µ—Ä–∂–∫—É –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞.

## üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞          | –°—Ç–∞—Ç—É—Å                            |
| --------- | -------------------- | --------------------------------- |
| Linux     | x86_64, ARM64        | ‚úÖ –ü–æ–ª–Ω–∞—è                         |
| macOS     | Intel, Apple Silicon | ‚úÖ –ü–æ–ª–Ω–∞—è                         |
| Windows   | x86_64, ARM64        | ‚úÖ –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫                     |
| Android   | ARM64, ARM           | ‚úÖ APK (AWG —Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è) |

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ Tailscale

1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ ‚Äî –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω–∏—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2.  –í–∞—à–∞ —Ç–µ–∫—É—â–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–Ω—É—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
3.  –ù–∞—á–Ω–∏—Ç–µ —Å –±–∞–∑–æ–≤–æ–π –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏: `tailscale awg set '{"jc":4,"jmin":64,"jmax":256}'`

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∫–ª–∏–µ–Ω—Ç, –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AWG
- –ú—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫/—Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ (–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è)
- s1/s2 –∏ h1‚Äìh4 —Ç—Ä–µ–±—É—é—Ç, —á—Ç–æ–±—ã –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∏–µ —É–∑–ª—ã –∏–º–µ–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `tailscale awg get`)

## üõ†Ô∏è –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª–µ–π –∑–∞–≥–æ–ª–æ–≤–∫–∞ (h1-h4)

–û–±—Ñ—É—Å–∫–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è WireGuard. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ 4 –∑–Ω–∞—á–µ–Ω–∏—è –∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ:

```bash
# –ü–µ—Ä–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–≤–≤–µ–¥–∏—Ç–µ \'random\' –¥–ª—è –∫–∞–∂–¥–æ–≥–æ h1-h4)
tailscale awg set  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ h1, h2, h3, h4 –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ

# –ü–æ–ª—É—á–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
tailscale awg get

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å JSON –Ω–∞ –¥—Ä—É–≥–∏–µ —É–∑–ª—ã (–¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å –≤—Å–µ h1-h4)
tailscale awg set '{\"s1\":10,\"s2\":15,\"h1\":3946285740,\"h2\":1234567890,\"h3\":987654321,\"h4\":555666777}'
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

1.  –ó–∞—Ö–≤–∞—Ç–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ —Å –ø–æ–º–æ—â—å—é Wireshark
2.  –ò–∑–≤–ª–µ–∫–∏—Ç–µ hex-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
3.  –°–æ–∑–¥–∞–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç: `<b 0xHEX>` (—Å—Ç–∞—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), `<r LENGTH>` (—Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), `<c>` (—Å—á–µ—Ç—á–∏–∫), `<t>` (–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞)
4.  –ü—Ä–∏–º–µ—Ä: `<b 0xc0000000><r 16><c><t>` = QUIC-–ø–æ–¥–æ–±–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ + 16 —Å–ª—É—á–∞–π–Ω—ã—Ö –±–∞–π—Ç + —Å—á–µ—Ç—á–∏–∫ + –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞

### –ü–∞–∫–µ—Ç—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ I1‚ÄìI5 (—Ü–µ–ø–æ—á–∫–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä) –∏ CPS (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞)

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º ¬´–æ—Å–æ–±—ã–º¬ª —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ–º (–∫–∞–∂–¥—ã–µ 120 —Å–µ–∫—É–Ω–¥) –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ –ø—è—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö UDP-–ø–∞–∫–µ—Ç–æ–≤ (I1‚ÄìI5) –≤ —Ñ–æ—Ä–º–∞—Ç–µ CPS –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

**–§–æ—Ä–º–∞—Ç CPS:**

```text
i{n} = <tag1><tag2><tag3>...<tagN>
```

**–¢–∏–ø—ã —Ç–µ–≥–æ–≤:**

| –¢–µ–≥ | –§–æ—Ä–º–∞—Ç         | –û–ø–∏—Å–∞–Ω–∏–µ                                                 | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è        |
| --- | -------------- | -------------------------------------------------------- | ------------------ |
| b   | `<b hex_data>` | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–π—Ç—ã –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤                | –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ |
| c   | `<c>`          | –°—á–µ—Ç—á–∏–∫ –ø–∞–∫–µ—Ç–æ–≤ (32-–±–∏—Ç–Ω—ã–π, —Å–µ—Ç–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤)      | –£–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ü–µ–ø–æ—á–∫–µ |
| t   | `<t>`          | –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ Unix (32-–±–∏—Ç–Ω–∞—è, —Å–µ—Ç–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤) | –£–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ü–µ–ø–æ—á–∫–µ |
| r   | `<r length>`   | –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–µ —Å–ª—É—á–∞–π–Ω—ã–µ –±–∞–π—Ç—ã                 | –¥–ª–∏–Ω–∞ ‚â§ 1000       |

**–ü—Ä–∏–º–µ—Ä:**

```text
i1 = <b 0xf6ab3267fa><c><b 0xf6ab><t><r 10>
```

> ‚ö†Ô∏è –ï—Å–ª–∏ i1 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –≤—Å—è —Ü–µ–ø–æ—á–∫–∞ (I2‚ÄìI5) –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.

#### –ó–∞—Ö–≤–∞—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é Wireshark

1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ Amnezia-WG –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã i1‚Äìi5
2.  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Wireshark –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ UDP-–ø–æ—Ä—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–ª—å—Ç—Ä: `udp.port == 51820`)
3.  –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–∞–∫–µ—Ç—ã –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏, –∏–∑–≤–ª–µ–∫–∞–π—Ç–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º. [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Amnezia-WG](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
tailscale version          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –∫–ª–∏–µ–Ω—Ç–∞
tailscale awg get          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Amnezia-WG
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

```bash
# –°–±—Ä–æ—Å–∏—Ç—å –¥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ WireGuard
tailscale awg reset

# –°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
tailscale awg set '{"jc":2,"jmin":64,"jmax":128}'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ (Linux)
sudo journalctl -u tailscaled -f
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Windows PowerShell

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º JSON:

```powershell
tailscale awg set  # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```

## ü§ù –°—Å—ã–ª–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- –†–µ–ª–∏–∑—ã: [LiuTangLei/tailscale](https://github.com/LiuTangLei/tailscale/releases)
- Android APK: [tailscale-android](https://github.com/LiuTangLei/tailscale-android/releases)
- –ü—Ä–æ–±–ª–µ–º—ã —Å —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–æ–º: [–¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–±–ª–µ–º](https://github.com/LiuTangLei/tailscale-awg-installer/issues)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Amnezia-WG: [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–õ–∏—Ü–µ–Ω–∑–∏—è BSD 3-Clause (—Ç–∞–∫–∞—è –∂–µ, –∫–∞–∫ —É –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ Tailscale)

---

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏ –∑–∞–∫–æ–Ω–Ω—ã—Ö —Ü–µ–ª—è—Ö –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏. –í—ã –Ω–µ—Å–µ—Ç–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞.
