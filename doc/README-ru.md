# Tailscale —Å Amnezia-WG 1.5

Tailscale —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π **Amnezia-WG 1.5** ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ DPI –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.

**üìö –Ø–∑—ã–∫–∏:** [English](../README.md) | [‰∏≠Êñá](README-zh.md) | [ŸÅÿßÿ±ÿ≥€å](README-fa.md) | [–†—É—Å—Å–∫–∏–π](README-ru.md)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

**Linux:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash
```

**macOS:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash
```

**Windows (–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ PowerShell):**

```powershell
iwr -useb https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1 | iex
```

### –ó–µ—Ä–∫–∞–ª–∞ (–¥–ª—è —Ä–µ–≥–∏–æ–Ω–æ–≤ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏)

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–µ—Ä–∫–∞–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, <https://your-mirror-site.com>), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –∑–µ—Ä–∫–∞–ª. –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [gh-proxy](https://github.com/hunshcn/gh-proxy).

```bash
# Linux:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash -s -- --mirror https://your-mirror-site.com
```

```bash
# macOS:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash -s -- --mirror https://your-mirror-site.com
```

```powershell
# Windows:
$scriptContent = (iwr -useb https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1).Content;$scriptBlock = [scriptblock]::Create($scriptContent); & $scriptBlock -MirrorPrefix 'https://your-mirror-site.com/'
```

**–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è PowerShell:**

```powershell
# –ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:
Set-ExecutionPolicy RemoteSigned
# –∏–ª–∏
Set-ExecutionPolicy Bypass -Scope Process
```

## ‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ ‚Äî –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Tailscale —Å Amnezia-WG.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ –ø–æ–¥–∫–æ–º–∞–Ω–¥—ã `tailscale amnezia-wg` –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—â–∞—Ç—å –¥–æ `tailscale awg` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tailscale awg set`).

### 1. –í—Ö–æ–¥ –≤ Tailscale

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–≤–æ–µ–π —Å–µ—Ç–∏ Tailscale:

```bash
# –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å
tailscale up

# –î–ª—è Headscale
tailscale up --login-server https://–≤–∞—à-headscale-–¥–æ–º–µ–Ω
```

### 2. –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ—Å–Ω–æ–≤–Ω–æ–π —É–∑–µ–ª)

–ù–∞ –ø–µ—Ä–≤–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É:

```bash
tailscale amnezia-wg set
```

–ö–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å—è—Ç –≤–≤–µ—Å—Ç–∏ H1‚ÄìH4, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ `random` ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —É–∑–ª–∞ –Ω–∞ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
tailscale amnezia-wg sync
```

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (S1/S2/H1‚ÄìH4) –ø–æ–¥—Ç—è–Ω—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 4. –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü–æ—Å–ª–µ sync –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, jitter) –∫–æ–º–∞–Ω–¥–æ–π:

```bash
tailscale amnezia-wg set
```

–ú–µ–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, S1/S2/H1‚ÄìH4 —Ç—Ä–æ–≥–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Amnezia-WG
tailscale amnezia-wg get

# –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É WireGuard
tailscale amnezia-wg reset
```

## üõ°Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Amnezia-WG

### –ú—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –∏ –ø–æ–¥–ø–∏—Å–∏

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–µ–π–∫–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –¥–ª—è –æ–±—Ö–æ–¥–∞ DPI, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –æ–±—ã—á–Ω—ã–º–∏ —É–∑–ª–∞–º–∏ Tailscale:

```bash
# –ë–∞–∑–æ–≤—ã–π –º—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫
tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'

# –°–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (i1-i5)
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>","i2":"<b 0x40><r 12>"}'
```

### –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

–î–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ –≤—Å–µ —É–∑–ª—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–æ—Ä–∫ –∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (ix –º–æ–∂–Ω–æ —Ä–∞–∑–Ω—ã–µ):

```bash
# –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è (s1/s2 –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å)
tailscale amnezia-wg set '{"s1":10,"s2":15}'

# –ü–æ–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ (h1-h4, –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'

# –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏ (i1-i5 –º–æ–∂–Ω–æ —Ä–∞–∑–Ω—ã–µ)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777,"i1":"<b 0xc0><r 32><c><t>"}'
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

**–ë–∞–∑–æ–≤—ã–µ (—Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –æ–±—ã—á–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏):**

| –¢–∏–ø             | –ö–æ–Ω—Ñ–∏–≥                                                | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å |
| --------------- | ----------------------------------------------------- | ------------- |
| –¢–æ–ª—å–∫–æ –º—É—Å–æ—Ä    | `{"jc":4,"jmin":64,"jmax":256}`                       | ‚úÖ –û–±—ã—á–Ω—ã–µ    |
| –ú—É—Å–æ—Ä+—Å–∏–≥–Ω–∞—Ç—É—Ä–∞ | `{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>"}` | ‚úÖ –û–±—ã—á–Ω—ã–µ    |

**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ (–≤—Å–µ —É–∑–ª—ã –Ω–∞ —ç—Ç–æ–º —Ñ–æ—Ä–∫–µ):**

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ      | –ü—Ä–∏–º–µ—Ä                                                                                           | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ    |
| --------------- | ------------------------------------------------------------------------------------------------ | ------------- |
| –†—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ     | `{"s1":10,"s2":15}`                                                                              | s1/s2: 0‚Äì64   |
| –ó–∞–≥–æ–ª–æ–≤–∫–∏       | `{"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234}`                              | h1‚Äìh4: 32-–±–∏—Ç |
| –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π | `{"jc":2,"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234,"i1":"<b 0xc0><r 16>"}` | jc/i1-i5 –æ–ø—Ü. |

> ‚ö†Ô∏è –ú—É—Å–æ—Ä–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (jc) –∏ –¥–ª–∏–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä (i1‚Äìi5) –º–æ–≥—É—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –∏ —Ç—Ä–∞—Ñ–∏–∫. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å —É–º–æ–º.

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- **jc**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (0-10, —Ç—Ä–µ–±—É–µ—Ç jmin/jmax)
- **jmin/jmax**: –†–∞–∑–º–µ—Ä –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (64-1024 –±–∞–π—Ç, —Ç–æ–ª—å–∫–æ —Å jc)
- **i1-i5**: –°–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (hex-—Å—Ç—Ä–æ–∫–∞)
- **s1/s2**: –ü—Ä–µ—Ñ–∏–∫—Å—ã —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è (0-64 –±–∞–π—Ç, –≤—Å–µ —É–∑–ª—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ)
- **h1-h4**: –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ (4 –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ 32 –±–∏—Ç–∞, –≤—Å–µ —É–∑–ª—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ, –¥–∏–∞–ø–∞–∑–æ–Ω 5‚Äì2147483647)

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –î–∏–∞–ø–∞–∑–æ–Ω     | –û–ø–∏—Å–∞–Ω–∏–µ                      |
| ---------- | ------------ | ----------------------------- |
| I1-I5      | hex-—Å—Ç—Ä–æ–∫–∞   | –°–∏–≥–Ω–∞—Ç—É—Ä—ã –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏        |
| S1, S2     | 0-64 –±–∞–π—Ç    | –ü—Ä–µ—Ñ–∏–∫—Å—ã —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è          |
| Jc         | 0-10         | –ö–æ–ª-–≤–æ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤       |
| Jmin, Jmax | 64-1024 –±–∞–π—Ç | –†–∞–∑–º–µ—Ä –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤       |
| H1-H4      | 0-4294967295 | 32-–±–∏—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ |

## üìä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã          | –°—Ç–∞—Ç—É—Å                   |
| --------- | -------------------- | ------------------------ |
| Linux     | x86_64, ARM64        | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞      |
| macOS     | Intel, Apple Silicon | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞      |
| Windows   | x86_64, ARM64        | ‚úÖ PowerShell-—É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ |

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ Tailscale

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ ‚Äî –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –∑–∞–º–µ–Ω—è—Ç—Å—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è
2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è
3. –î–ª—è —Å—Ç–∞—Ä—Ç–∞ –≤–∫–ª—é—á–∏—Ç–µ –±–∞–∑–æ–≤—É—é –º–∞—Å–∫–∏—Ä–æ–≤–∫—É: `tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'`

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Tailscale, –ø–æ–∫–∞ –Ω–µ –≤–∫–ª—é—á–∏—Ç–µ –º–∞—Å–∫–∏—Ä–æ–≤–∫—É
- –ú—É—Å–æ—Ä–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (jc) –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã (i1-i5) —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –ª—é–±—ã–º–∏ —É–∑–ª–∞–º–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è
- –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ (s1/s2) –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (h1-h4) —Ç—Ä–µ–±—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö
- –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—á—Ç–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ (h1-h4)

–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è WireGuard. –í—Å–µ 4 –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–∞–Ω—ã –∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ:

```bash
# –ü–µ—Ä–≤—ã–π —É–∑–µ–ª: —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–≤–≤–æ–¥–∏—Ç–µ random –¥–ª—è –∫–∞–∂–¥–æ–≥–æ h1-h4)
tailscale amnezia-wg set  # –í–≤–µ–¥–∏—Ç–µ h1, h2, h3, h4 –ø–æ –∑–∞–ø—Ä–æ—Å—É

# –ü–æ–ª—É—á–∏—Ç—å JSON-–∫–æ–Ω—Ñ–∏–≥
tailscale amnezia-wg get

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ JSON –Ω–∞ –¥—Ä—É–≥–∏–µ —É–∑–ª—ã (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ h1-h4)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'
```

### –°–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

1. –°–Ω–∏–º–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ Wireshark
2. –ò–∑–≤–ª–µ–∫–∏—Ç–µ hex-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
3. –§–æ—Ä–º–∞—Ç: `<b 0xHEX>` (—Å—Ç–∞—Ç–∏—á–Ω—ã–µ), `<r LENGTH>` (—Å–ª—É—á–∞–π–Ω—ã–µ), `<c>` (—Å—á—ë—Ç—á–∏–∫), `<t>` (timestamp)
4. –ü—Ä–∏–º–µ—Ä: `<b 0xc0000000><r 16><c><t>` = –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞–∫ —É QUIC + 16 —Å–ª—É—á–∞–π–Ω—ã—Ö –±–∞–π—Ç + —Å—á—ë—Ç—á–∏–∫ + timestamp

### –ü–∞–∫–µ—Ç—ã I1‚ÄìI5 (—Ü–µ–ø–æ—á–∫–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä) –∏ CPS (–∫–∞—Å—Ç–æ–º–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞)

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º "–æ—Å–æ–±—ã–º" —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ–º (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–∑ –≤ 120 —Å–µ–∫—É–Ω–¥) –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ 5 UDP-–ø–∞–∫–µ—Ç–æ–≤ (I1‚ÄìI5) –≤ —Ñ–æ—Ä–º–∞—Ç–µ CPS –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

**CPS-—Ñ–æ—Ä–º–∞—Ç:**

```text
i{n} = <tag1><tag2><tag3>...<tagN>
```

**–¢–∏–ø—ã —Ç–µ–≥–æ–≤:**

| –¢–µ–≥ | –§–æ—Ä–º–∞—Ç         | –û–ø–∏—Å–∞–Ω–∏–µ                                | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è     |
| --- | -------------- | --------------------------------------- | --------------- |
| b   | `<b hex_data>` | –°—Ç–∞—Ç–∏—á–Ω—ã–µ –±–∞–π—Ç—ã –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ | –õ—é–±–∞—è –¥–ª–∏–Ω–∞     |
| c   | `<c>`          | –°—á—ë—Ç—á–∏–∫ –ø–∞–∫–µ—Ç–æ–≤ (32-–±–∏—Ç, network order) | –£–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ü–µ–ø–∏ |
| t   | `<t>`          | Unix timestamp (32-–±–∏—Ç, network order)  | –£–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ü–µ–ø–∏ |
| r   | `<r length>`   | –ö—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏–µ —Å–ª—É—á–∞–π–Ω—ã–µ –±–∞–π—Ç—ã           | length ‚â§ 1000   |

**–ü—Ä–∏–º–µ—Ä:**

```text
i1 = <b 0xf6ab3267fa><c><b 0xf6ab><t><r 10>
```

> ‚ö†Ô∏è –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω i1, –≤—Å—è —Ü–µ–ø–æ—á–∫–∞ (I2‚ÄìI5) –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.

#### –°–Ω—è—Ç–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Wireshark

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Amnezia-WG –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ i1‚Äìi5
2. –°–ª—É—à–∞–π—Ç–µ UDP-–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ Wireshark (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–ª—å—Ç—Ä: `udp.port == 51820`)
3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–∞–∫–µ—Ç—ã, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–≤–ª–µ–∫–∞–π—Ç–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Amnezia-WG](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## üêõ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
tailscale version          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –∫–ª–∏–µ–Ω—Ç–∞
tailscale amnezia-wg get   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Amnezia-WG
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

```bash
# –°–±—Ä–æ—Å –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É WireGuard
tailscale amnezia-wg reset

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128}'

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (Linux)
sudo journalctl -u tailscaled -f
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å PowerShell

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º JSON:

```powershell
tailscale amnezia-wg set  # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```

## ü§ù –°—Å—ã–ª–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **–ë–∏–Ω–∞—Ä–Ω—ã–µ —Ä–µ–ª–∏–∑—ã**: [LiuTangLei/tailscale](https://github.com/LiuTangLei/tailscale/releases)
- **–í–æ–ø—Ä–æ—Å—ã –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ**: [GitHub Issues](https://github.com/LiuTangLei/tailscale-awg-installer/issues)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Amnezia-WG**: [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

BSD 3-Clause License (–∫–∞–∫ —É Tailscale)

---

**‚ö†Ô∏è –û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–µ–≥–∞–ª—å–Ω–æ–≥–æ –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –∑–∞–∫–æ–Ω–æ–≤.**

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

**Linux:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash
```

**macOS:**

```bash
curl -fsSL https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash
```

**Windows (PowerShell –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):**

```powershell
iwr -useb https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1 | iex
```

### –í–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

**–ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ –∑–µ—Ä–∫–∞–ª–∞ (–µ—Å–ª–∏ GitHub –º–µ–¥–ª–µ–Ω–Ω—ã–π –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ):**

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—à–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–µ—Ä–∫–∞–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, <https://your-mirror-site.com>) —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –∑–µ—Ä–∫–∞–ª. –í—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–≤–æ—ë –∑–µ—Ä–∫–∞–ª–æ –∏—Å–ø–æ–ª—å–∑—É—è [gh-proxy](https://github.com/hunshcn/gh-proxy).

```bash
# Linux:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-linux.sh | bash -s -- --mirror https://your-mirror-site.com
```

```bash
# macOS:
curl -fsSL https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-macos.sh | bash -s -- --mirror https://your-mirror-site.com
```

```powershell
# Windows:
$scriptContent = (iwr -useb https://your-mirror-site.com/https://raw.githubusercontent.com/LiuTangLei/tailscale-awg-installer/main/install-windows.ps1).Content;$scriptBlock = [scriptblock]::Create($scriptContent); & $scriptBlock -MirrorPrefix 'https://your-mirror-site.com/'
```

**–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è PowerShell:**

```powershell
# –ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:
Set-ExecutionPolicy RemoteSigned
# –∏–ª–∏
Set-ExecutionPolicy Bypass -Scope Process
```

## ‚öôÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ ‚Äî –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Tailscale —Å Amnezia-WG.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ –ø–æ–¥–∫–æ–º–∞–Ω–¥—ã `tailscale amnezia-wg` –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—â–∞—Ç—å –¥–æ `tailscale awg` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tailscale awg set`).

### 1. –í—Ö–æ–¥ –≤ Tailscale

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–≤–æ–µ–π —Å–µ—Ç–∏ Tailscale:

```bash
# –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å
tailscale up

# –î–ª—è Headscale
tailscale up --login-server https://–≤–∞—à-headscale-–¥–æ–º–µ–Ω
```

### 2. –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ—Å–Ω–æ–≤–Ω–æ–π —É–∑–µ–ª)

–ù–∞ –ø–µ—Ä–≤–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É:

```bash
tailscale amnezia-wg set
```

–ö–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å—è—Ç –≤–≤–µ—Å—Ç–∏ H1‚ÄìH4, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ `random` ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —É–∑–ª–∞ –Ω–∞ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
tailscale amnezia-wg sync
```

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (S1/S2/H1‚ÄìH4) –ø–æ–¥—Ç—è–Ω—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 4. –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü–æ—Å–ª–µ sync –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, jitter) –∫–æ–º–∞–Ω–¥–æ–π:

```bash
tailscale amnezia-wg set
```

–ú–µ–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, S1/S2/H1‚ÄìH4 —Ç—Ä–æ–≥–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Amnezia-WG
tailscale amnezia-wg get

# –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É WireGuard
tailscale amnezia-wg reset
```

## üõ°Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Amnezia-WG

### –ú—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –∏ –ø–æ–¥–ø–∏—Å–∏

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–µ–π–∫–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –¥–ª—è –æ–±—Ö–æ–¥–∞ DPI, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –æ–±—ã—á–Ω—ã–º–∏ —É–∑–ª–∞–º–∏ Tailscale:

```bash
# –ë–∞–∑–æ–≤—ã–π –º—É—Å–æ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫
tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'

# –°–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (i1-i5)
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>","i2":"<b 0x40><r 12>"}'
```

### –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

–î–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ –≤—Å–µ —É–∑–ª—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–æ—Ä–∫ –∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (ix –º–æ–∂–Ω–æ —Ä–∞–∑–Ω—ã–µ):

```bash
# –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è (s1/s2 –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å)
tailscale amnezia-wg set '{"s1":10,"s2":15}'

# –ü–æ–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ (h1-h4, –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'

# –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏ (i1-i5 –º–æ–∂–Ω–æ —Ä–∞–∑–Ω—ã–µ)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777,"i1":"<b 0xc0><r 32><c><t>"}'
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

**–ë–∞–∑–æ–≤—ã–µ (—Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –æ–±—ã—á–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏):**

| –¢–∏–ø             | –ö–æ–Ω—Ñ–∏–≥                                                | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å |
| --------------- | ----------------------------------------------------- | ------------- |
| –¢–æ–ª—å–∫–æ –º—É—Å–æ—Ä    | `{"jc":4,"jmin":64,"jmax":256}`                       | ‚úÖ –û–±—ã—á–Ω—ã–µ    |
| –ú—É—Å–æ—Ä+—Å–∏–≥–Ω–∞—Ç—É—Ä–∞ | `{"jc":2,"jmin":64,"jmax":128,"i1":"<b 0xc0><r 16>"}` | ‚úÖ –û–±—ã—á–Ω—ã–µ    |

**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ (–≤—Å–µ —É–∑–ª—ã –Ω–∞ —ç—Ç–æ–º —Ñ–æ—Ä–∫–µ):**

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ      | –ü—Ä–∏–º–µ—Ä                                                                                           | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ    |
| --------------- | ------------------------------------------------------------------------------------------------ | ------------- |
| –†—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ     | `{"s1":10,"s2":15}`                                                                              | s1/s2: 0‚Äì64   |
| –ó–∞–≥–æ–ª–æ–≤–∫–∏       | `{"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234}`                              | h1‚Äìh4: 32-–±–∏—Ç |
| –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π | `{"jc":2,"s1":10,"s2":15,"h1":123456,"h2":789012,"h3":345678,"h4":901234,"i1":"<b 0xc0><r 16>"}` | jc/i1-i5 –æ–ø—Ü. |

> ‚ö†Ô∏è –ú—É—Å–æ—Ä–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (jc) –∏ –¥–ª–∏–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä (i1‚Äìi5) –º–æ–≥—É—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –∏ —Ç—Ä–∞—Ñ–∏–∫. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å —É–º–æ–º.

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- **jc**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (0-10, —Ç—Ä–µ–±—É–µ—Ç jmin/jmax)
- **jmin/jmax**: –†–∞–∑–º–µ—Ä –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (64-1024 –±–∞–π—Ç, —Ç–æ–ª—å–∫–æ —Å jc)
- **i1-i5**: –°–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (hex-—Å—Ç—Ä–æ–∫–∞)
- **s1/s2**: –ü—Ä–µ—Ñ–∏–∫—Å—ã —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è (0-64 –±–∞–π—Ç, –≤—Å–µ —É–∑–ª—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ)
- **h1-h4**: –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ (4 –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ 32 –±–∏—Ç–∞, –≤—Å–µ —É–∑–ª—ã –æ–¥–∏–Ω–∞–∫–æ–≤–æ, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ, –¥–∏–∞–ø–∞–∑–æ–Ω 5‚Äì2147483647)

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –î–∏–∞–ø–∞–∑–æ–Ω     | –û–ø–∏—Å–∞–Ω–∏–µ                      |
| ---------- | ------------ | ----------------------------- |
| I1-I5      | hex-—Å—Ç—Ä–æ–∫–∞   | –°–∏–≥–Ω–∞—Ç—É—Ä—ã –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏        |
| S1, S2     | 0-64 –±–∞–π—Ç    | –ü—Ä–µ—Ñ–∏–∫—Å—ã —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è          |
| Jc         | 0-10         | –ö–æ–ª-–≤–æ –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤       |
| Jmin, Jmax | 64-1024 –±–∞–π—Ç | –†–∞–∑–º–µ—Ä –º—É—Å–æ—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤       |
| H1-H4      | 0-4294967295 | 32-–±–∏—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ |

## üìä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã          | –°—Ç–∞—Ç—É—Å                   |
| --------- | -------------------- | ------------------------ |
| Linux     | x86_64, ARM64        | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞      |
| macOS     | Intel, Apple Silicon | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞      |
| Windows   | x86_64, ARM64        | ‚úÖ PowerShell-—É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ |

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ Tailscale

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ ‚Äî –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –∑–∞–º–µ–Ω—è—Ç—Å—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è
2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è
3. –î–ª—è —Å—Ç–∞—Ä—Ç–∞ –≤–∫–ª—é—á–∏—Ç–µ –±–∞–∑–æ–≤—É—é –º–∞—Å–∫–∏—Ä–æ–≤–∫—É: `tailscale amnezia-wg set '{"jc":4,"jmin":64,"jmax":256}'`

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Tailscale, –ø–æ–∫–∞ –Ω–µ –≤–∫–ª—é—á–∏—Ç–µ –º–∞—Å–∫–∏—Ä–æ–≤–∫—É
- –ú—É—Å–æ—Ä–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (jc) –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã (i1-i5) —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –ª—é–±—ã–º–∏ —É–∑–ª–∞–º–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è
- –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ (s1/s2) –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (h1-h4) —Ç—Ä–µ–±—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö
- –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—á—Ç–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ (h1-h4)

–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è WireGuard. –í—Å–µ 4 –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–∞–Ω—ã –∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ:

```bash
# –ü–µ—Ä–≤—ã–π —É–∑–µ–ª: —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–≤–≤–æ–¥–∏—Ç–µ random –¥–ª—è –∫–∞–∂–¥–æ–≥–æ h1-h4)
tailscale amnezia-wg set  # –í–≤–µ–¥–∏—Ç–µ h1, h2, h3, h4 –ø–æ –∑–∞–ø—Ä–æ—Å—É

# –ü–æ–ª—É—á–∏—Ç—å JSON-–∫–æ–Ω—Ñ–∏–≥
tailscale amnezia-wg get

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ JSON –Ω–∞ –¥—Ä—É–≥–∏–µ —É–∑–ª—ã (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ h1-h4)
tailscale amnezia-wg set '{"s1":10,"s2":15,"h1":3946285740,"h2":1234567890,"h3":987654321,"h4":555666777}'
```

### –°–∏–≥–Ω–∞—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

1. –°–Ω–∏–º–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ Wireshark
2. –ò–∑–≤–ª–µ–∫–∏—Ç–µ hex-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
3. –§–æ—Ä–º–∞—Ç: `<b 0xHEX>` (—Å—Ç–∞—Ç–∏—á–Ω—ã–µ), `<r LENGTH>` (—Å–ª—É—á–∞–π–Ω—ã–µ), `<c>` (—Å—á—ë—Ç—á–∏–∫), `<t>` (timestamp)
4. –ü—Ä–∏–º–µ—Ä: `<b 0xc0000000><r 16><c><t>` = –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞–∫ —É QUIC + 16 —Å–ª—É—á–∞–π–Ω—ã—Ö –±–∞–π—Ç + —Å—á—ë—Ç—á–∏–∫ + timestamp

### –ü–∞–∫–µ—Ç—ã I1‚ÄìI5 (—Ü–µ–ø–æ—á–∫–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä) –∏ CPS (–∫–∞—Å—Ç–æ–º–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞)

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º "–æ—Å–æ–±—ã–º" —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ–º (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–∑ –≤ 120 —Å–µ–∫—É–Ω–¥) –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ 5 UDP-–ø–∞–∫–µ—Ç–æ–≤ (I1‚ÄìI5) –≤ —Ñ–æ—Ä–º–∞—Ç–µ CPS –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

**CPS-—Ñ–æ—Ä–º–∞—Ç:**

```text
i{n} = <tag1><tag2><tag3>...<tagN>
```

**–¢–∏–ø—ã —Ç–µ–≥–æ–≤:**

| –¢–µ–≥ | –§–æ—Ä–º–∞—Ç         | –û–ø–∏—Å–∞–Ω–∏–µ                                | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è     |
| --- | -------------- | --------------------------------------- | --------------- |
| b   | `<b hex_data>` | –°—Ç–∞—Ç–∏—á–Ω—ã–µ –±–∞–π—Ç—ã –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ | –õ—é–±–∞—è –¥–ª–∏–Ω–∞     |
| c   | `<c>`          | –°—á—ë—Ç—á–∏–∫ –ø–∞–∫–µ—Ç–æ–≤ (32-–±–∏—Ç, network order) | –£–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ü–µ–ø–∏ |
| t   | `<t>`          | Unix timestamp (32-–±–∏—Ç, network order)  | –£–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ü–µ–ø–∏ |
| r   | `<r length>`   | –ö—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏–µ —Å–ª—É—á–∞–π–Ω—ã–µ –±–∞–π—Ç—ã           | length ‚â§ 1000   |

**–ü—Ä–∏–º–µ—Ä:**

```text
i1 = <b 0xf6ab3267fa><c><b 0xf6ab><t><r 10>
```

> ‚ö†Ô∏è –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω i1, –≤—Å—è —Ü–µ–ø–æ—á–∫–∞ (I2‚ÄìI5) –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.

#### –°–Ω—è—Ç–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Wireshark

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Amnezia-WG –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ i1‚Äìi5
2. –°–ª—É—à–∞–π—Ç–µ UDP-–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ Wireshark (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–ª—å—Ç—Ä: `udp.port == 51820`)
3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–∞–∫–µ—Ç—ã, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–≤–ª–µ–∫–∞–π—Ç–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Amnezia-WG](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## üêõ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
tailscale version          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –∫–ª–∏–µ–Ω—Ç–∞
tailscale amnezia-wg get   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Amnezia-WG
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

```bash
# –°–±—Ä–æ—Å –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É WireGuard
tailscale amnezia-wg reset

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
tailscale amnezia-wg set '{"jc":2,"jmin":64,"jmax":128}'

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (Linux)
sudo journalctl -u tailscaled -f
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å PowerShell

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º JSON:

```powershell
tailscale amnezia-wg set  # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```

## ü§ù –°—Å—ã–ª–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **–ë–∏–Ω–∞—Ä–Ω—ã–µ —Ä–µ–ª–∏–∑—ã**: [LiuTangLei/tailscale](https://github.com/LiuTangLei/tailscale/releases)
- **–í–æ–ø—Ä–æ—Å—ã –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ**: [GitHub Issues](https://github.com/LiuTangLei/tailscale-awg-installer/issues)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Amnezia-WG**: [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.amnezia.org/documentation/instructions/new-amneziawg-selfhosted)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

BSD 3-Clause License (–∫–∞–∫ —É Tailscale)

---

**‚ö†Ô∏è –û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–µ–≥–∞–ª—å–Ω–æ–≥–æ –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –∑–∞–∫–æ–Ω–æ–≤.**
